/*
 * TAME [TwinCAT ADS Made Easy] V3.1 beta 2
 * 
 * Copyright (c) 2009-2012 Thomas Schmidt; t.schmidt.p1 at freenet.de
 * 
 * Dual licensed under:
 *  MIT - http://www.opensource.org/licenses/mit-license
 *  GPLv3 - http://www.opensource.org/licenses/GPL-3.0
 * 
 */
var TAME={weekdShortNames:{ge:["So","Mo","Di","Mi","Do","Fr","Sa"],en:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},weekdLongNames:{ge:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],en:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},monthsShortNames:{ge:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],en:["Jan","Feb","Mar","Apr","May","Jun","July","Aug","Sept","Oct","Nov","Dez"]},monthsLongNames:{ge:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],en:["January","February","March","April","May","June","July","August","September","October","November","December"]}};TAME.WebServiceClient=function(f){var V=this,m={M:16416,MX:16417,I:61472,IX:61473,Q:61488,QX:61489,Upload:61451,UploadInfo:61452,SumRd:61568,SumWr:61569,SumRdWr:61570},z={BOOL:1,BYTE:1,USINT:1,SINT:1,WORD:2,UINT:2,INT:2,INT16:2,INT1DP:2,DWORD:4,UDINT:4,DINT:4,TIME:4,TOD:4,DATE:4,DT:4,POINTER:4,REAL:4,LREAL:8,STRING:80,EndStruct:0},h=(typeof f.language=="string")?f.language:"ge",n=function(){var e={},ai="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ah;for(ah=0;ah<ai.length;ah++){e[ah]=ai.charAt(ah)}return e}(),q=function(){var e={},ai="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ah;for(ah=0;ah<ai.length;ah++){e[ai.charAt(ah)]=ah}return e}(),i=f.dataAlign4,B=[0],M={},k=false,a=0,v=0,g,c,K;if(typeof f.serviceUrl=="string"){g=f.serviceUrl}else{try{console.log("TAME library error: Service URL is not a string!")}catch(af){}return}if(typeof f.amsNetId=="string"){c=f.amsNetId}else{try{console.log("TAME library error: NetId is not a string!")}catch(af){}return}if(f.amsPort===undefined){K="801"}else{if(typeof f.amsPort=="string"&&parseInt(f.amsPort,10)>=801&&parseInt(f.amsPort,10)<=804){K=f.amsPort}else{try{console.log("TAME library error: AMS Port Number ("+parseInt(f.amsPort,10)+") is no string or out of range!")}catch(af){}return}}this.dateNames={weekdShort:TAME.weekdShortNames[h],weekdLong:TAME.weekdLongNames[h],monthsShort:TAME.monthsShortNames[h],monthsLong:TAME.monthsLongNames[h]};this.maxStringLen=255;this.maxDropReq=10;this.useCheckBounds=true;function G(e){if((e>=97)&&(e<=102)){return(e-87)}if((e>=65)&&(e<=70)){return(e-55)}if((e>=48)&&(e<=57)){return(e-48)}return 0}function ab(ak,ah){var e=[],aj=ak.toString(16),ai;while(aj.length<ah*2){aj="0"+aj}for(ai=0;ai<ah;ai++){e[(ah-1)-ai]=((G(aj.charCodeAt(ai*2))*16)+G(aj.charCodeAt((ai*2)+1)))}return e}function s(ah){var ak=0,an=0,al,e,aj,am,ai;e=Math.abs(ah);if(ah!==0){for(ai=128;ai>-127;ai--){aj=e/Math.pow(2,ai);if(aj>=2){break}am=ai;al=aj}am+=127;al=al.toString(2);for(ai=2;ai<25;ai++){ak<<=1;if(al.charAt(ai)=="1"){ak+=1}}if(al.charAt(25)=="1"){ak+=1}an=am;an<<=23;an+=ak;if(ah<0){an+=2147483648}}return an}function A(am){var ai=0,ao=0,aj={part1:0,part2:0},ap,al,ah,e,an,ak;ap=Math.abs(am);if(am!==0){for(ak=1024;ak>=-1023;ak--){al=ap/Math.pow(2,ak);if(al>=2){break}ah=ak;an=al}ah+=1023;an=an.toString(2);for(ak=2;ak<22;ak++){ai<<=1;if(an.charAt(ak)=="1"){ai+=1}}if(an.charAt(ak)=="1"){e=true}ak++;for(ak;ak<54;ak++){ao<<=1;if(an.charAt(ak)=="1"){ao+=1}}aj.part1=ah;aj.part1<<=20;aj.part1+=ai;if(am<0){aj.part1+=2147483648}aj.part2=ao;if(e===true){aj.part2+=2147483648}}return aj}function H(ai,ah){var e;switch(ah){case"#d":case"#dd":e=ai*86400000;break;case"#h":case"#hh":e=ai*3600000;break;case"#m":case"#mm":e=ai*60000;break;case"#s":case"#ss":e=ai*1000;break;case"#ms":case"#msmsms":e=ai;break;default:e=ai;break}return e}function o(am){var al=n,aj=0,ah="",ak,ai,e;while(aj<am.length){ak=am[aj++];ai=am[aj++];e=am[aj++];ah=ah+al[ak>>2]+al[((ak&3)<<4)|(ai>>4)]+(isNaN(ai)?"=":al[(((ai&15)<<2)|(e>>6))])+((isNaN(ai)||isNaN(e))?"=":al[e&63])}return ah}function d(ao,am,an,ak){var aq=[],ah,ap,ai,aj;if(ao.val===undefined){switch(am){case"STRING":ao.val="";break;case"DATE":case"DT":case"TOD":ao.val=new Date();break;default:ao.val=0;break}try{console.log("TAME library warning: Value of a variable in write request is not defined!");console.log(ao)}catch(al){}}switch(am){case"BOOL":if(ao.val){aq[0]=1}else{aq[0]=0}break;case"BYTE":case"USINT":ah=Q(ao,am,0,255);aq=ab(ah,ak);break;case"SINT":ah=Q(ao,am,-128,127);if(ah<0){ah=ah+256}aq=ab(ah,ak);break;case"WORD":case"UINT":ah=Q(ao,am,0,65535);aq=ab(ah,ak);break;case"INT":case"INT16":ah=Q(ao,am,-32768,32767);if(ah<0){ah=ah+65536}aq=ab(ah,ak);break;case"INT1DP":ao.val=Math.round(ao.val*10);ah=Q(ao,am,-32768,32767);if(ah<0){ah=ah+65536}aq=ab(ah,ak);break;case"DWORD":case"UDINT":ah=Q(ao,am,0,4294967295);aq=ab(ah,ak);break;case"DINT":ah=Q(ao,am,-2147483648,2147483647);if(ah<0){ah=ah+4294967296}aq=ab(ah,ak);break;case"REAL":ah=Q(ao,am);ah=s(ah);aq=ab(ah,ak);break;case"LREAL":ah=Q(ao,am);ah=A(ah);aq=ab(ah.part2,ak);aq=aq.concat(ab(ah.part1,ak));break;case"DATE":if(typeof ao.val=="object"){ao.val.setHours(0);ao.val.setMinutes(0);ao.val.setSeconds(0);ah=ao.val.getTime()/1000-ao.val.getTimezoneOffset()*60}else{try{console.log("TAME library error: Date is not an object!)");console.log(ao)}catch(al){}}aq=ab(ah,ak);break;case"DT":if(typeof ao.val=="object"){ah=ao.val.getTime()/1000-ao.val.getTimezoneOffset()*60}else{try{console.log("TAME library error: Date is not an object!)");console.log(ao)}catch(al){}}aq=ab(ah,ak);break;case"TOD":if(typeof ao.val=="object"){ao.val.setYear(1970);ao.val.setMonth(0);ao.val.setDate(1);ah=ao.val.getTime()-ao.val.getTimezoneOffset()*60000}else{try{console.log("TAME library error: Date is not an object!)");console.log(ao)}catch(al){}}aq=ab(ah,ak);break;case"STRING":ap=(an===undefined)?z.STRING:parseInt(an,10);if(ae(ap)){ai=ap<ao.val.length?ap:ao.val.length;for(aj=0;aj<ai;aj++){aq[aj]=ao.val.charCodeAt(aj)}for(aj;aj<ap;aj++){aq[aj]=0}aq[aj]=0}break;case"TIME":ah=ao.val*1;ah=H(ah,an);if(ah<0){ah=0;try{console.log("TAME library warning: Lower limit for TIME variable exceeded!)");console.log("value: "+ao.val+an);console.log(ao)}catch(al){}}else{if(ah>4294967295){ah=4294967295;try{console.log("TAME library warning: Upper limit for TIME variable exceeded!)");console.log("value: "+ao.val+an);console.log(ao)}catch(al){}}}aq=ab(ah,ak);break;case"EndStruct":break;default:try{console.log("TAME library error: Unknown data type in write request : "+am)}catch(al){}break}return aq}function P(ah){var e=t(ah.charCodeAt(0));return parseInt(e,16)}function ad(e){var ah=P(e);if(ah>127){ah=ah-256}return ah}function L(ah){var e=t(ah.charCodeAt(1));e+=t(ah.charCodeAt(0));return parseInt(e,16)}function J(e){var ah=L(e);if(ah>32767){ah=ah-65536}return ah}function D(ah){var e=t(ah.charCodeAt(3));e+=t(ah.charCodeAt(2));e+=t(ah.charCodeAt(1));e+=t(ah.charCodeAt(0));return parseInt(e,16)}function N(e){var ah=D(e);if(ah>2147483647){ah=ah-4294967296}return ah}function U(e,ai){var ah=D(e);if(ai===undefined){return ah}else{return(F(ah,ai))}}function p(e,ai){var ah=new Date(D(e));ah=new Date(ah.getTime()+ah.getTimezoneOffset()*60000);if(ai===undefined){return ah}else{return(ag(ah,ai))}}function aa(ah,ai){var e=new Date(D(ah)*1000);e=new Date(e.getTime()+e.getTimezoneOffset()*60000);if(ai===undefined){return e}else{return(ag(e,ai))}}function r(ai){var ak=1,am=0.5,ah=D(ai),e,al,aj;if(ah===0){return 0}e=((ah>>>31)==1)?"-":"+";ah<<=1;al=(ah>>>24)-127;ah<<=8;for(aj=1;aj<=23;aj++){ak+=ah<0?am:0;ah<<=1;am/=2}return parseFloat(e+(ak*Math.pow(2,al)))}function C(ai){var ah=D(ai.substring(4,8)),al=D(ai.substring(0,4)),ak=12,aj=1,an=0.5,e,am;if(ah===0&&al===0){return 0}e=((ah>>>31)==1)?"-":"+";ah<<=1;am=(ah>>>21)-1023;ah<<=11;while(ak<32){aj+=ah<0?an:0;ah<<=1;an/=2;ak++}if((al>>>31)==1){aj+=an;al<<=1;an/=2}while(ak<64){aj+=al<0?an:0;al<<=1;an/=2;ak++}return parseFloat(e+(aj*Math.pow(2,am)))}function Y(e){return e.split(String.fromCharCode(0))[0]}function t(ah){var e=ah.toString(16);if((e.length%2)!==0){e="0"+e}return e}function j(ah,e){e=(isNaN(e))?0:e;var ai=ah.toString(10);while(ai.length<e){ai="0"+ai}return ai}function ag(am,al){var e=al.split("#"),ak=e.length,ah="",aj,ai;for(ai=1;ai<ak;ai++){switch(e[ai]){case"D":aj=am.getDate();break;case"DD":aj=am.getDate();aj=j(aj,2);break;case"WD":aj=am.getDay();break;case"WKD":aj=V.dateNames.weekdShort[am.getDay()];break;case"WEEKDAY":aj=V.dateNames.weekdLong[am.getDay()];break;case"M":aj=am.getMonth()+1;break;case"MM":aj=am.getMonth()+1;aj=j(aj,2);break;case"MON":aj=V.dateNames.monthsShort[am.getMonth()];break;case"MONTH":aj=V.dateNames.monthsLong[am.getMonth()];break;case"YY":aj=am.getYear();while(aj>100){aj-=100}break;case"YYYY":aj=am.getFullYear();break;case"h":aj=am.getHours();break;case"hh":aj=am.getHours();aj=j(aj,2);break;case"m":aj=am.getMinutes();break;case"mm":aj=am.getMinutes();aj=j(aj,2);break;case"s":aj=am.getSeconds();break;case"ss":aj=am.getSeconds();aj=j(aj,2);break;case"ms":aj=am.getMilliseconds();break;case"msmsms":aj=am.getMilliseconds();aj=j(aj,3);break;default:aj=e[ai];break}ah=ah+aj}return ah}function F(am,al){var e=al.split("#"),ak=e.length,ah="",aj,ai;for(ai=1;ai<ak;ai++){switch(e[ai]){case"d":if(ak<=2){aj=am/86400000}else{aj=Math.floor(am/86400000);am=am%86400000}break;case"dd":if(ak<=2){aj=am/86400000}else{aj=Math.floor(am/86400000);am=am%86400000}aj=j(aj,2);break;case"h":if(ak<=2){aj=am/3600000}else{aj=Math.floor(am/3600000);am=am%3600000}break;case"hh":if(ak<=2){aj=am/3600000}else{aj=Math.floor(am/3600000);am=am%3600000}aj=j(aj,2);break;case"m":if(ak<=2){aj=am/60000}else{aj=Math.floor(am/60000);am=am%60000}break;case"mm":if(ak<=2){aj=am/60000}else{aj=Math.floor(am/60000);am=am%60000}aj=j(aj,2);break;case"s":if(ak<=2){aj=am/1000}else{aj=Math.floor(am/1000);am=am%1000}break;case"ss":if(ak<=2){aj=am/1000}else{aj=Math.floor(am/1000);am=am%1000}aj=j(aj,2);break;case"ms":aj=am;break;case"msmsms":aj=am;aj=j(aj,3);break;default:aj=e[ai];break}ah=ah+aj}return ah}function O(aj){var ak=q,am=0,e="",al,ai,ah,aq,ap,ao,an;aj=aj.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{aq=ak[aj.charAt(am++)];ap=ak[aj.charAt(am++)];ao=ak[aj.charAt(am++)];an=ak[aj.charAt(am++)];al=(aq<<2)|(ap>>4);ai=((ap&15)<<4)|(ao>>2);ah=((ao&3)<<6)|an;e+=String.fromCharCode(al);if(ao!=64){e+=String.fromCharCode(ai)}if(an!=64){e+=String.fromCharCode(ah)}}while(am<aj.length);return e}function R(ai,ah,al){var aj;switch(ah){case"BOOL":aj=(ai.charCodeAt(0)!="0");break;case"BYTE":case"USINT":aj=P(ai);break;case"SINT":aj=ad(ai);break;case"WORD":case"UINT":aj=L(ai);break;case"INT":case"INT16":aj=J(ai);break;case"INT1DP":aj=((J(ai))/10).toFixed(1);break;case"DWORD":case"UDINT":aj=D(ai);break;case"DINT":aj=N(ai);break;case"REAL":aj=r(ai);if(al!==undefined){aj=aj.toFixed(parseInt(al,10))}break;case"LREAL":aj=C(ai);if(al!==undefined){aj=aj.toFixed(parseInt(al,10))}break;case"STRING":aj=Y(ai);break;case"TOD":aj=p(ai,al);break;case"TIME":aj=U(ai,al);break;case"DT":case"DATE":aj=aa(ai,al);break;case"EndStruct":break;default:try{console.log("TAME library error: Unknown data type at parsing read request: "+ah)}catch(ak){}break}return aj}function w(aA){var ah=aA.xmlHttpReq.responseXML.documentElement,ar=aA.reqDescr.items,ap=[],at=0,ax,aj,ak,az,an,av,ao,ay,ai,au,aq,al,am;try{aj=O(ah.getElementsByTagName("ppData")[0].firstChild.data);for(aq=0,al=ar.length;aq<al;aq++){ax=ar[aq];ap=ac(ax);ai=ap[0];au=ap[1];av=z[ai];switch(ai){case"STRING":if(au!==undefined){an=parseInt(au,10)}av=(ae(an)?an:av)+1;break;case"EndStruct":av=ax.val;break}ao=av<4?av:4;if(aA.reqDescr.seq!==true){am=l(aA.reqDescr);at=ax.addr-am}else{if(aA.reqDescr.dataAlign4===true&&ao>1&&ai!="STRING"&&at>0){ay=at%ao;if(ay>0){at+=ao-ay}}}ak=aj.substr(at,av);az=R(ak,ai,au);if(ai!=="EndStruct"){y(ax.jvar,az,aA.reqDescr.dataObj,ax.prefix,ax.suffix)}if(aA.reqDescr.seq===true){at+=av}}}catch(aw){try{console.log("TAME library error: Parsing Failed:"+aw);console.log(ax)}catch(aw){}return}}function b(aI){var ah=aI.xmlHttpReq.responseXML.documentElement,au=aI.reqDescr.items,ar=[],ay=0,aj=0,aw=window,aF,al,am,aH,aA,ak,az,at,ap,an,av,ax,aC,aq,aE,ao;function aD(){var aJ,e;if(i===true&&ak!=="STRING"){aJ=aA<4?aA:4;if(aJ>1&&aj>0){e=aj%aJ;if(e>0){aj+=aJ-e}}if(aJ>aE){aE=aJ}}}function ai(){var aJ,e;if(ak==="STRING"){if(az!==undefined){aJ=parseInt(az,10)}else{if(typeof M[aF.name].stringLength==="number"){aJ=M[aF.name].stringLength}}aA=(ae(aJ)?aJ:aA)+1}e=am.substr(aj,aA);aH=R(e,ak,az);y(av,aH,aw,aF.prefix,aF.suffix);aj+=aA}function aG(){var aJ,e,aL,aK;for(aC in aF.def){e=aF.def[aC].split(".");if(e[0]==="ARRAY"){aL=parseInt(e[1],10);aK=e.length-1;for(aJ=0;aJ<aL;aJ++){ak=e[2];if(e[aK]==="SP"){av=aC+aJ;if(aK>=4){az=e.slice(3,-1).join(".")}}else{av=aC+"."+aJ;if(aK>=3){az=e.slice(3).join(".")}}if(ax!==undefined){av=ax+"."+av}aA=z[ak];aD();ai()}}else{if(ax!==undefined){av=ax+"."+aC}else{av=aC}ak=e[0];az=e.slice(1).join(".");aA=z[ak];aD();ai()}}if(i===true&&aE>1&&ak!="STRING"){if(aE>4){aE=4}mod=aj%aE;if(mod>0){aj+=aE-mod}}}try{al=O(ah.getElementsByTagName("ppRdData")[0].firstChild.data);for(at=0,ap=au.length;at<ap;at++){am=al.substr(ay,4);an=R(am,"DWORD");if(an!==0){try{console.log("TAME library error: ADS sub command error while processing a SumReadRequest!");console.log("Error code: "+an);console.log(au[at])}catch(aB){}}ay+=4}for(at=0;at<ap;at++){aF=au[at];ar=ac(aF);ak=ar[0];az=ar[1];ao=M[aF.name].size;am=al.substr(ay,ao);switch(ak){case"ARRAY":aw=y(aF.jvar);aj=0;aq=M[aF.name].arrayLength;if(M[aF.name].arrayDataType==="USER"){for(ax=0;ax<aq;ax++){aG()}}else{ak=M[aF.name].arrayDataType;aA=z[ak];for(ax=0;ax<aq;ax++){av=ax;ai()}}break;case"USER":aw=y(aF.jvar);aj=0;aG();break;default:aH=R(am,ak,az);y(aF.jvar,aH,aw,aF.prefix,aF.suffix)}ay+=ao}}catch(aB){try{console.log("TAME library error: Parsing Failed:"+aB);console.log(aF)}catch(aB){}return}}function y(ah,ak,aj,am,aq){var al=[],ap=0,ao=[],ai=0;if(typeof ah=="number"){al[0]=ah.toString(10)}else{if(typeof ah=="string"){al=ah.split(".")}else{try{console.log("TAME library error: Can't parse name of object/variable. Name is not a string or number!");console.log(ah)}catch(an){}return}}if(aj===undefined){aj=window}ap=al.length-1;while(ai<ap){if(al[ai].charAt(al[ai].length-1)=="]"){ao=al[ai].substring(0,al[ai].length-1).split("[");aj=aj[ao[0]][ao[1]]}else{if(aj[al[ai]]===undefined){aj[al[ai]]=[]}aj=aj[al[ai]]}ai++}if(al[ai].charAt(al[ai].length-1)=="]"){ao=al[ai].substring(0,al[ai].length-1).split("[");aj=aj[ao[0]];if(ak!==undefined){if(typeof am=="string"){ak=am+ak}if(typeof aq=="string"){ak=ak+aq}aj[ao[1]]=ak}return aj[ao[1]]}else{if(ak!==undefined){if(typeof am=="string"){ak=am+ak}if(typeof aq=="string"){ak=ak+aq}aj[al[ai]]=ak}return aj[al[ai]]}}function ae(ah){if(ah===undefined){return false}else{if(!isNaN(ah)&&ah>0&&ah<=V.maxStringLen){return true}else{try{console.log("TAME library error: User defined string length not valid! length: "+ah);console.log("Max. string length: "+V.maxStringLen)}catch(ai){}return false}}}function x(ai){var ah;if(ai.addr){if(typeof ai.addr=="string"&&ai.addr.charAt(0)=="%"){if(ai.addr.charAt(2)=="X"){ah=m[ai.addr.substr(1,2)]}else{ah=m[ai.addr.substr(1,1)]}}else{try{console.log('TAME library error: Wrong address definition, should be a string and start with "%"!');console.log(ai)}catch(aj){}return}}else{if(ai.name){if(typeof ai.name=="string"){try{ah=M[ai.name].indexGroup}catch(aj){try{console.log("TAME library error: Can't get the IndexGroup for this request!");console.log("TAME library error: Please check the variable name.");console.log(aj);console.log(ai)}catch(aj){}return}}else{try{console.log("TAME library error: Varible name should be a string!");console.log(ai)}catch(aj){}return}}else{try{console.log("TAME library error: Neither a name nor an address for the variable/request defined!");console.log(ai)}catch(aj){}return}}if(isNaN(ah)){try{console.log("TAME library error: IndexGroup is not a number, check address or name definition of the variable/request!");console.log(ai)}catch(aj){}}return ah}function l(ai){var al,ah="",aj=[];if(ai.addr){if(typeof ai.addr=="string"&&ai.addr.charAt(0)=="%"){if(ai.addr.charAt(2)=="X"){ah=ai.addr.substr(3);aj=ah.split(".");al=aj[0]*8+aj[1]*1}else{al=parseInt(ai.addr.substr(3),10);if(typeof ai.addrOffset=="number"){al+=ai.addrOffset}}}else{try{console.log('TAME library error: Wrong address definition, should be a string and start with "%"!');console.log(ai)}catch(ak){}return}}else{if(ai.name){if(typeof ai.name=="string"){try{al=M[ai.name].indexOffset;if(typeof ai.addrOffset=="number"){al+=ai.addrOffset}}catch(ak){try{console.log("TAME library error: Can't get the IndexOffset for this request!");console.log("TAME library error: Please check the variable name.");console.log(ak);console.log(ai)}catch(ak){}return}}else{try{console.log("TAME library error: Varible name should be a string!");console.log(ai)}catch(ak){}return}}else{try{console.log("TAME library error: Neither a name nor an address for the variable/request defined!");console.log(ai)}catch(ak){}return}}if(isNaN(al)){try{console.log("TAME library error: IndexOffset is not a number, check address or name definition of the variable/request.");console.log(ai)}catch(ak){}}return al}function T(){var ah;if(XMLHttpRequest){ah=new XMLHttpRequest()}else{try{ah=new ActiveXObject("Msxml2.XMLHTTP")}catch(ai){try{ah=new ActiveXObject("Microsoft.XMLHTTP")}catch(ai){ah=null;try{console.log("TAME library error: Failed Creating XMLHttpRequest-Object!")}catch(ai){}}}}return ah}function u(ai){if(ai.reqDescr.debug){try{console.log(ai)}catch(ah){}}ai.send=function(){var aj,ak;if(typeof this.reqDescr.id==="number"&&B[this.reqDescr.id]>0){try{console.log("TAME library warning: Request dropped (last request with ID "+ai.reqDescr.id+" not finished!)")}catch(al){}B[this.reqDescr.id]++;if(B[this.reqDescr.id]<=V.maxDropReq){return}B[this.reqDescr.id]=0}if(ai.sync===true){ak=false}else{if(this.reqDescr.sync===true){ak=false}else{if(this.reqDescr.sync===false){ak=true}else{if(f.syncXMLHttp===true){ak=false}else{ak=true}}}}this.xmlHttpReq=T();aj="<?xml version='1.0' encoding='utf-8'?>";aj+="<soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' ";aj+="xmlns:xsd='http://www.w3.org/2001/XMLSchema' ";aj+="xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>";aj+="<soap:Body><q1:";aj+=this.method;aj+=" xmlns:q1='http://beckhoff.org/message/'><netId xsi:type='xsd:string'>";aj+=c;aj+="</netId><nPort xsi:type='xsd:int'>";aj+=K;aj+="</nPort><indexGroup xsi:type='xsd:unsignedInt'>";aj+=this.indexGroup;aj+="</indexGroup><indexOffset xsi:type='xsd:unsignedInt'>";aj+=this.indexOffset;aj+="</indexOffset>";if((this.method==="Read"||this.method==="ReadWrite")&&this.reqDescr.readLength>0){aj+="<cbRdLen xsi:type='xsd:int'>";aj+=this.reqDescr.readLength;aj+="</cbRdLen>"}if(this.pData&&this.pData.length>0){aj+="<pData xsi:type='xsd:base64Binary'>";aj+=this.pData;aj+="</pData>"}if(this.pwrData&&this.pwrData.length>0){aj+="<pwrData xsi:type='xsd:base64Binary'>";aj+=this.pwrData;aj+="</pwrData>"}aj+="</q1:";aj+=this.method;aj+="></soap:Body></soap:Envelope>";if(typeof this.xmlHttpReq==="object"){this.xmlHttpReq.open("POST",g,ak);this.xmlHttpReq.setRequestHeader("SOAPAction","http://beckhoff.org/action/TcAdsSync."+this.method);this.xmlHttpReq.setRequestHeader("Content-Type","text/xml; charset=utf-8");if(ak===true){this.xmlHttpReq.onreadystatechange=function(){if((ai.xmlHttpReq.readyState===4)&&(ai.xmlHttpReq.status===200)){V.parseResponse(ai)}};this.xmlHttpReq.send(aj)}else{this.xmlHttpReq.send(aj);V.parseResponse(ai)}if(typeof this.reqDescr.id==="number"){B[this.reqDescr.id]=1}}};return ai}function Q(ak,aj,ai,ah){var am;if(typeof ak.val=="string"){if(aj==="REAL"||aj==="LREAL"){am=parseFloat(ak.val)}else{am=parseInt(ak.val,10)}}else{if(typeof ak.val=="number"){am=ak.val}else{try{console.log("TAME library error: Wrong variable type for a numeric variable in write request!");console.log("TAME library error: Variable type should be number or string, but is "+typeof ak.val);console.log(ak)}catch(al){}am=0}}if(isNaN(am)){am=0;try{console.log("TAME library error: Value of a numeric variable in write request is not a number.");console.log(ak)}catch(al){}}if(V.useCheckBounds===true){if(aj==="LREAL"){if(!isFinite(am)){try{console.log("TAME library warning: Limit for LREAL value exceeded!");console.log("Upper limit: "+Number.MAX_VALUE);console.log("Lower limit: "+Number.MIN_VALUE);console.log("value: "+am);console.log(ak)}catch(al){}}}else{if(aj==="REAL"){if(am>0){if(am<1.175495e-38){try{console.log("TAME library warning: Lower limit for positive REAL value exceeded!");console.log("limit: 1.175495e-38");console.log("value: "+am);console.log(ak)}catch(al){}am=1.175495e-38}else{if(am>3.402823e+38){try{console.log("TAME library warning: Upper limit for positive REAL value exceeded!");console.log("limit: 3.402823e+38");console.log("value: "+am);console.log(ak)}catch(al){}am=3.402823e+38}}}else{if(am<0){if(am>-1.175495e-38){try{console.log("TAME library warning: Upper limit for negative REAL value exceeded!");console.log("limit: -1.175495e-38");console.log("value: "+am);console.log(ak)}catch(al){}am=-1.175495e-38}else{if(am<-3.402823e+38){try{console.log("TAME library warning: Lower limit for negative REAL value exceeded!");console.log("limit: -3.402823e+38");console.log("value: "+am);console.log(ak)}catch(al){}am=-3.402823e+38}}}}}else{if(am<ai){try{console.log("TAME library warning: Lower limit for numeric value exceeded!");console.log("type: "+aj);console.log("limit: "+ai);console.log("value: "+am);console.log(ak)}catch(al){}am=ai}else{if(am>ah){try{console.log("TAME library warning: Upper limit for numeric value exceeded!");console.log("type: "+aj);console.log("limit: "+ah);console.log("value: "+am);console.log(ak)}catch(al){}am=ah}}}}}return am}function ac(ai){var ah=[];if(typeof ai.type=="string"){ah=ai.type.split(".");if(ah.length>2){ah[1]=ah.slice(1).join(".")}}else{if(k&&typeof ai.name=="string"){try{ah[0]=M[ai.name].type;if(ah[0]==="STRING"){ah[1]=M[ai.name].stringLength}else{if(typeof ai.format=="string"){ah[1]=ai.format}else{if(typeof ai.decPlaces=="number"){ah[1]=ai.decPlaces}else{if(typeof ai.dp=="number"){ah[1]=ai.dp}}}}}catch(aj){try{console.log("TAME library error: A problem occured while reading a data type from the symbol table!");console.log(aj);console.log(ai)}catch(aj){}}}else{try{console.log("TAME library error: Could not get the type of the item!");console.log(ai)}catch(aj){}}}return ah}function I(an,al,aj){var ai={},ak,ah;ah=z[al];if(typeof aj.name=="string"){aj.name=aj.name.toUpperCase()}switch(al){case"STRING":if(ae(aj.strlen)){al+="."+aj.strlen;ah=aj.strlen}else{if(k===true){try{ah=M[aj.name].stringLength;al+="."+ah}catch(am){try{console.log("TAME library error: A problem occured while reading the string length from the symbol table!");console.log(am)}catch(am){}}}}ah++;break;case"TIME":case"TOD":case"DT":case"DATE":if(typeof aj.format=="string"){al+="."+aj.format}break;case"REAL":case"LREAL":if(typeof aj.decPlaces=="number"){al+="."+aj.decPlaces}else{if(typeof aj.dp=="number"){al+="."+aj.dp}}break}ai={addr:aj.addr,name:aj.name,id:aj.id,oc:aj.oc,ocd:aj.ocd,readLength:ah,debug:aj.debug,sync:aj.sync,seq:true,items:[{val:aj.val,jvar:aj.jvar,type:al,prefix:aj.prefix,suffix:aj.suffix}]};if(an==="Write"){V.writeReq(ai)}else{V.readReq(ai)}}function E(ak,al,aj){var am={},ay={},at,ai,aA=0,aB=0,az=0,aC,ah=[],aG,ao,ar=0,au,ap,aF=0,av=0,aI,aE,aq,aH,aw;if(typeof aj.name=="string"){aj.name=aj.name.toUpperCase()}if(ak==="Write"&&typeof aj.val=="object"){ay=aj.val}else{if(typeof aj.jvar=="string"){ay=y(aj.jvar)}else{try{console.log("TAME library error: No data object for this "+ak+"-Request defined!")}catch(aD){}}}if(typeof aj.arrlen=="number"){at=aj.arrlen}else{if(k===true){try{at=M[aj.name].arrayLength}catch(aD){try{console.log("TAME library error: A proble occured while reading the array length from the symbol table!");console.log(aD)}catch(aD){}}}else{try{console.log("TAME library error: Can't get the array length for this request!");console.log(aD)}catch(aD){}}}if(typeof aj.item=="number"&&!isNaN(aj.item)&&ak==="Write"){aH=true;if(aj.item<0||aj.item>at-1){try{console.log('TAME library error: Wrong value for "item"!');console.log("item: "+aj.item);console.log("Last array index: "+(at-1))}catch(aD){}}}function an(){if(typeof aj.def=="string"){aj.def=y(aj.def)}else{if(typeof aj.def!="object"){try{console.log("TAME library error: No structure definition found!")}catch(aJ){}}}for(aE in aj.def){ah=aj.def[aE].split(".");if(ah[0]=="ARRAY"){aG=parseInt(ah[1],10);ah.shift();ah.shift()}else{aG=1}for(aB=0;aB<aG;aB++){if(ah[0]=="STRING"){if(typeof ah[1]=="string"){au=parseInt(ah[1],10)}ap=(ae(au)?au:z[ah[0]])+1}else{ap=z[ah[0]]}if(i===true&&ap>1&&ah[0]!="STRING"&&ar>0){aI=ar%ap;if(aI>0){ar+=ap-aI}}ar+=ap}if(i===true&&ap>aF&&ah[0]!="STRING"){aF=ap}}if(i===true&&aF>1&&ah[0]!="STRING"){if(aF>4){aF=4}aI=ar%aF;if(aI>0){av=aF-aI;ar+=av}}if(aH){ai=ar*aj.item;at=1}am={addr:aj.addr,name:aj.name,addrOffset:ai,id:aj.id,oc:aj.oc,ocd:aj.ocd,debug:aj.debug,readLength:ar*at,seq:true,dataAlign4:i,dataObj:ay,sync:aj.sync,items:[]};for(aB=0;aB<at;aB++){for(aE in aj.def){ah=aj.def[aE].split(".");if(ah[0]=="ARRAY"){aG=parseInt(ah[1],10);ao=ah.length-1;for(az=0;az<aG;az++){if(ah[ao]=="SP"){am.items[aA]={jvar:aB+"."+aE+az};if(ao===4){am.items[aA].type=ah[2]+"."+ah[3]}else{am.items[aA].type=ah[2]}}else{am.items[aA]={jvar:aB+"."+aE+"."+az};if(ao===3){am.items[aA].type=ah[2]+"."+ah[3]}else{am.items[aA].type=ah[2]}}if(ak==="Write"){if(aH){if(ah[ao]=="SP"){am.items[aA].val=ay[aj.item][aE+az]}else{am.items[aA].val=ay[aj.item][aE][az]}}else{if(ah[ao]=="SP"){am.items[aA].val=ay[aB][aE+az]}else{am.items[aA].val=ay[aB][aE][az]}}}aA++}}else{am.items[aA]={jvar:aB+"."+aE,type:aj.def[aE]};if(ak==="Write"){if(aH){am.items[aA].val=ay[aj.item][aE]}else{am.items[aA].val=ay[aB][aE]}}aA++}}if(i===true){am.items[aA]={type:"EndStruct",val:av};aA++}}}function ax(){aC=z[al];switch(al){case"STRING":if(ae(aj.strlen)){al+="."+aj.strlen;aC=aj.strlen}else{if(k===true){aC=M[aj.name].stringLength;al+="."+aC}}aC++;break;case"TIME":case"TOD":case"DT":case"DATE":if(typeof aj.format=="string"){al+="."+aj.format}break;case"REAL":case"LREAL":if(typeof aj.decPlaces=="number"){al+="."+aj.decPlaces}else{if(typeof aj.dp=="number"){al+="."+aj.dp}}break}if(aH){ai=aj.item*aC;at=1}am={addr:aj.addr,name:aj.name,addrOffset:ai,id:aj.id,oc:aj.oc,ocd:aj.ocd,readLength:aC*at,debug:aj.debug,seq:true,dataObj:ay,items:[]};for(aB=0;aB<at;aB++){am.items[aB]={jvar:aB,type:al};if(ak==="Write"){if(aH){am.items[aB].val=ay[aj.item]}else{am.items[aB].val=ay[aB]}}}}if(al==="STRUCT"){an()}else{ax()}if(ak==="Write"){V.writeReq(am)}else{V.readReq(am)}}function X(ah,aq){var am={},ai={},ar=[],ak=0,ao,aj,al,an;if(typeof aq.name=="string"){aq.name=aq.name.toUpperCase()}if(ah==="Write"&&typeof aq.val=="object"){ai=aq.val}else{if(typeof aq.jvar=="string"){ai=y(aq.jvar)}else{try{console.log("TAME library error: No data object for this "+ah+"-Request defined!")}catch(ap){}}}if(typeof aq.def=="string"){aq.def=y(aq.def)}else{if(typeof aq.def!="object"){try{console.log("TAME library error: No structure defininition found!")}catch(ap){}}}am={addr:aq.addr,name:aq.name,id:aq.id,oc:aq.oc,ocd:aq.ocd,debug:aq.debug,seq:true,dataAlign4:i,dataObj:ai,sync:aq.sync,items:[]};for(al in aq.def){ar=aq.def[al].split(".");if(ar[0]=="ARRAY"){aj=parseInt(ar[1],10);ao=ar.length-1;for(an=0;an<aj;an++){if(ar[ao]=="SP"){am.items[ak]={jvar:al+an};if(ao===4){am.items[ak].type=ar[2]+"."+ar[3]}else{am.items[ak].type=ar[2]}}else{am.items[ak]={jvar:al+"."+an};if(ao===3){am.items[ak].type=ar[2]+"."+ar[3]}else{am.items[ak].type=ar[2]}}if(ah==="Write"){if(ar[ao]=="SP"){am.items[ak].val=ai[al+an]}else{am.items[ak].val=ai[al][an]}}ak++}}else{am.items[ak]={jvar:al,type:aq.def[al]};if(ah==="Write"){am.items[ak].val=ai[al]}ak++}}if(ah==="Write"){V.writeReq(am)}else{V.readReq(am)}}this.writeReq=function(aj){var al=aj.items,at={},e=[],ao=[],aw=[],an,ar,ai,am,ah,au,ap,av,ak,aq;if(typeof aj.name=="string"){aj.name=aj.name.toUpperCase()}for(aq=0,ai=al.length;aq<ai;aq++){av=al[aq];ao=ac(av);an=ao[0];ar=ao[1];am=(z[an]<4)?z[an]:4;if(aj.dataAlign4===true&&am>1&&an!="STRING"&&e.length>0){ap=e.length%am;if(ap>0){au=am-ap;for(ak=1;ak<=au;ak++){e.push(0)}}}if(an==="EndStruct"){for(ak=1;ak<=av.val;ak++){e.push(0)}}else{aw=d(av,an,ar,am);e=e.concat(aw)}}if(e&&e.length>0){e=o(e)}at={method:"Write",indexGroup:x(aj),indexOffset:l(aj),pData:e,reqDescr:aj};u(at).send()};this.readReq=function(ai){var aq={},aj=ai.items,al=[],ar,ap,ak,e,am,an,at,ao,ah;if(typeof ai.name=="string"){ai.name=ai.name.toUpperCase()}if(typeof ai.readLength!="number"){ai.readLength=0;for(ao=0,e=aj.length;ao<e;ao++){ar=aj[ao];al=ac(ar);ak=al[0];ap=al[1];if(ak=="STRING"){if(typeof ap=="string"){at=parseInt(ap,10)}an=(ae(at)?at:z[ak])+1}else{an=z[ak]}if(ai.seq===true){if(ai.dataAlign4===true&&an>1&&ak!="STRING"&&ai.readLength>0){am=ai.readLength%an;if(am>0){ai.readLength+=an-am}}ai.readLength+=an}else{ah=l(ai);ai.readLength=an+ar.addr-ah}}}aq={method:"Read",indexGroup:x(ai),indexOffset:l(ai),reqDescr:ai};u(aq).send()};this.sumReadReq=function(ai){var ar={},al=ai.items,ao=[],au=[],av=[],ak=0,ah=al.length,aj={},an,aq,at,ap,am,e;ai.readLength=ah*4;for(ap=0;ap<ah;ap++){at=al[ap];if(typeof at.name=="string"){at.name=at.name.toUpperCase()}ao=ac(at);an=ao[0];aq=ao[1];am=M[at.name].size;ai.readLength+=am;aj.val=x(at);av=d(aj,"UDINT",aq,4);au=au.concat(av);aj.val=l(at);av=d(aj,"UDINT",aq,4);au=au.concat(av);aj.val=am;av=d(aj,"UDINT",aq,4);au=au.concat(av)}if(au.length>0){e=o(au)}ar={method:"ReadWrite",indexGroup:m.SumRd,indexOffset:al.length,pwrData:e,reqDescr:ai};u(ar).send()};this.logSymbols=function(){try{console.log(M)}catch(ah){}};this.getSymbols=function(){var ai;if(typeof JSON!=="object"){try{console.log("TAME library error: No JSON parser found.")}catch(ah){}}else{try{ai=JSON.stringify(M);return ai}catch(ah){try{console.log("TAME library error: Could not convert the Symbol Table to JSON:"+ah)}catch(ah){}}}};this.setSymbols=function(ai){if(typeof JSON!=="object"){try{console.log("TAME library error: No JSON parser found.")}catch(ah){}}else{try{M=JSON.parse(ai)}catch(ah){try{console.log("TAME library error: Could not read the Symbol Table from JSON:"+ah)}catch(ah){}}}};this.writeBool=function(e){I("Write","BOOL",e)};this.writeByte=function(e){I("Write","BYTE",e)};this.writeUsint=function(e){I("Write","USINT",e)};this.writeSint=function(e){I("Write","SINT",e)};this.writeWord=function(e){I("Write","WORD",e)};this.writeUint=function(e){I("Write","UINT",e)};this.writeInt=function(e){I("Write","INT",e)};this.writeInt1Dp=function(e){I("Write","INT1DP",e)};this.writeDword=function(e){I("Write","DWORD",e)};this.writeUdint=function(e){I("Write","UDINT",e)};this.writeDint=function(e){I("Write","DINT",e)};this.writeReal=function(e){I("Write","REAL",e)};this.writeLreal=function(e){I("Write","LREAL",e)};this.writeString=function(e){I("Write","STRING",e)};this.writeTime=function(e){I("Write","TIME",e)};this.writeTod=function(e){I("Write","TOD",e)};this.writeDate=function(e){I("Write","DATE",e)};this.writeDt=function(e){I("Write","DT",e)};this.readBool=function(e){I("Read","BOOL",e)};this.readByte=function(e){I("Read","BYTE",e)};this.readUsint=function(e){I("Read","USINT",e)};this.readSint=function(e){I("Read","SINT",e)};this.readWord=function(e){I("Read","WORD",e)};this.readUint=function(e){I("Read","UINT",e)};this.readInt=function(e){I("Read","INT",e)};this.readInt1Dp=function(e){I("Read","INT1DP",e)};this.readDword=function(e){I("Read","DWORD",e)};this.readUdint=function(e){I("Read","UDINT",e)};this.readDint=function(e){I("Read","DINT",e)};this.readReal=function(e){I("Read","REAL",e)};this.readLreal=function(e){I("Read","LREAL",e)};this.readString=function(e){I("Read","STRING",e)};this.readTime=function(e){I("Read","TIME",e)};this.readTod=function(e){I("Read","TOD",e)};this.readDate=function(e){I("Read","DATE",e)};this.readDt=function(e){I("Read","DT",e)};this.writeStruct=function(e){X("Write",e)};this.readStruct=function(e){X("Read",e)};this.writeArrayOfBool=function(e){E("Write","BOOL",e)};this.writeArrayOfByte=function(e){E("Write","BYTE",e)};this.writeArrayOfUsint=function(e){E("Write","USINT",e)};this.writeArrayOfSint=function(e){E("Write","SINT",e)};this.writeArrayOfWord=function(e){E("Write","WORD",e)};this.writeArrayOfUint=function(e){E("Write","UINT",e)};this.writeArrayOfInt=function(e){E("Write","INT",e)};this.writeArrayOfInt1Dp=function(e){E("Write","INT1DP",e)};this.writeArrayOfDword=function(e){E("Write","DWORD",e)};this.writeArrayOfUdint=function(e){E("Write","UDINT",e)};this.writeArrayOfDint=function(e){E("Write","DINT",e)};this.writeArrayOfReal=function(e){E("Write","REAL",e)};this.writeArrayOfLreal=function(e){E("Write","LREAL",e)};this.writeArrayOfString=function(e){E("Write","STRING",e)};this.writeArrayOfTime=function(e){E("Write","TIME",e)};this.writeArrayOfTod=function(e){E("Write","TOD",e)};this.writeArrayOfDate=function(e){E("Write","DATE",e)};this.writeArrayOfDt=function(e){E("Write","DT",e)};this.writeArrayOfStruct=function(e){E("Write","STRUCT",e)};this.readArrayOfBool=function(e){E("Read","BOOL",e)};this.readArrayOfByte=function(e){E("Read","BYTE",e)};this.readArrayOfUsint=function(e){E("Read","USINT",e)};this.readArrayOfSint=function(e){E("Read","SINT",e)};this.readArrayOfWord=function(e){E("Read","WORD",e)};this.readArrayOfUint=function(e){E("Read","UINT",e)};this.readArrayOfInt=function(e){E("Read","INT",e)};this.readArrayOfInt1Dp=function(e){E("Read","INT1DP",e)};this.readArrayOfDword=function(e){E("Read","DWORD",e)};this.readArrayOfUdint=function(e){E("Read","UDINT",e)};this.readArrayOfDint=function(e){E("Read","DINT",e)};this.readArrayOfReal=function(e){E("Read","REAL",e)};this.readArrayOfLreal=function(e){E("Read","LREAL",e)};this.readArrayOfString=function(e){E("Read","STRING",e)};this.readArrayOfTime=function(e){E("Read","TIME",e)};this.readArrayOfTod=function(e){E("Read","TOD",e)};this.readArrayOfDate=function(e){E("Read","DATE",e)};this.readArrayOfDt=function(e){E("Read","DT",e)};this.readArrayOfStruct=function(e){E("Read","STRUCT",e)};this.parseResponse=function(al){var ai=al.xmlHttpReq.responseXML.documentElement,ak,ah;if(typeof al.reqDescr.id=="number"){B[al.reqDescr.id]=0}try{ah=ai.getElementsByTagName("faultstring")[0].firstChild.data;try{ak=ai.getElementsByTagName("errorcode")[0].firstChild.data}catch(aj){ak="-"}try{console.log("TAME library error: Message from server:  "+ah+" ("+ak+")")}catch(aj){}return}catch(aj){ak=0}if(typeof ai.normalize=="function"){ai.normalize()}if(al.method==="Read"||al.method==="ReadWrite"){switch(al.indexGroup){case m.UploadInfo:S(al);break;case m.Upload:Z(al);break;case m.SumRd:b(al);break;default:w(al)}}if(typeof al.reqDescr.oc=="function"){if(typeof al.reqDescr.ocd=="number"){window.setTimeout(al.reqDescr.oc,al.reqDescr.ocd)}else{al.reqDescr.oc()}}};function W(){var e={method:"Read",sync:true,indexGroup:m.UploadInfo,indexOffset:0,reqDescr:{readLength:8}};u(e).send()}function S(am){var ah=am.xmlHttpReq.responseXML.documentElement,ai,an,ak,aj;try{ai=O(ah.getElementsByTagName("ppData")[0].firstChild.data);an=ai.substr(0,4);a=R(an,"DWORD");an=ai.substr(4,4);v=R(an,"DWORD")}catch(al){try{console.log("TAME library error: Parsing of UploadInfo failed:"+al)}catch(al){}return}aj={method:"Read",sync:true,indexGroup:m.Upload,indexOffset:0,reqDescr:{readLength:v}};u(aj).send()}function Z(az){var ah=az.xmlHttpReq.responseXML.documentElement,aq=0,aw=4,at=8,ao=12,al=30,ak,am,ay,ap,ar,ai,ax,an,aj,av;try{ak=O(ah.getElementsByTagName("ppData")[0].firstChild.data);for(ap=0;ap<a;ap++){am=ak.substr(aq,4);ar=R(am,"DWORD");ai=ak.substring(aq+al,(aq+ar)).split(String.fromCharCode(0));M[ai[0]]={typeString:ai[1],indexGroup:R(ak.substr(aq+aw,4),"DWORD"),indexOffset:R(ak.substr(aq+at,4),"DWORD"),size:R(ak.substr(aq+ao,4),"DWORD")};ax=ai[1].split(" ");if(ax[0]==="ARRAY"){M[ai[0]].type=ax[0];an=ax[1].substring(1,ax[1].length-1);an=an.split("..");an=parseInt(an[1],10)-parseInt(an[0],10)+1;M[ai[0]].arrayLength=an;aj=ax[3].split("(");if(aj[1]!==undefined){aj[1]=aj[1].substr(0,aj[1].length-1);M[ai[0]].fullType=ax[0]+"."+an+"."+aj[0]+"."+aj[1];M[ai[0]].stringLength=parseInt(aj[1],10)}else{M[ai[0]].fullType=ax[0]+"."+an+"."+aj[0]}M[ai[0]].itemSize=M[ai[0]].size/an;M[ai[0]].arrayDataType="USER";for(av in z){if(aj[0]===av){M[ai[0]].arrayDataType=aj[0]}}}else{aj=ax[0].split("(");if(aj[1]!==undefined){aj[1]=aj[1].substr(0,aj[1].length-1);M[ai[0]].fullType=aj[0]+"."+aj[1];M[ai[0]].stringLength=parseInt(aj[1],10)}else{M[ai[0]].fullType=aj[0]}M[ai[0]].type="USER";for(av in z){if(aj[0]===av){M[ai[0]].type=aj[0]}}}aq+=ar}k=true;try{console.log("TAME library info: End of reading the UploadInfo.");console.log("TAME library info: Symbol table ready.")}catch(au){}if(f.isTaskerScript===true){writeSymFile()}}catch(au){try{console.log("TAME library error: Parsing of uploaded symbol information failed:"+au)}catch(au){}return}}if(f.dontReadUpload===true){try{console.log("TAME library info: Reading of the UploadInfo deactivated. Symbol Table could not be created.")}catch(af){}}else{try{console.log("TAME library info: Start of reading the UploadInfo.")}catch(af){}W()}};TAME.WebServiceClient.createClient=function(a){return new TAME.WebServiceClient(a)};