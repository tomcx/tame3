/*!
 * TAME [TwinCAT ADS Made Easy] V3.2 beta
 * 
 * Copyright (c) 2009-2013 Thomas Schmidt; t.schmidt.p1 at freenet.de
 * 
 * Dual licensed under:
 *  MIT - http://www.opensource.org/licenses/mit-license
 *  GPLv3 - http://www.opensource.org/licenses/GPL-3.0
 * 
 */
var TAME={weekdShortNames:{ge:["So","Mo","Di","Mi","Do","Fr","Sa"],en:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},weekdLongNames:{ge:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],en:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},monthsShortNames:{ge:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],en:["Jan","Feb","Mar","Apr","May","Jun","July","Aug","Sept","Oct","Nov","Dez"]},monthsLongNames:{ge:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],en:["January","February","March","April","May","June","July","August","September","October","November","December"]}};TAME.WebServiceClient=function(d){function k(ai){try{window.console.log(ai)}catch(aj){alert(ai)}}var V=this,l={M:16416,MX:16417,I:61472,IX:61473,Q:61488,QX:61489,Upload:61451,UploadInfo:61452,SumRd:61568,SumWr:61569,SumRdWr:61570},y={BOOL:1,BYTE:1,USINT:1,SINT:1,WORD:2,UINT:2,INT:2,INT16:2,INT1DP:2,DWORD:4,UDINT:4,DINT:4,TIME:4,TOD:4,DATE:4,DT:4,POINTER:4,REAL:4,LREAL:8,STRING:80,EndStruct:0},P=["INVALID","IDLE","RESET","INIT","START","RUN","STOP","SAVECFG","POWERGOOD","ERROR","SHUTDOWN","SUSPEND","RESUME","CONFIG","RECONFIG"],f=(typeof d.language==="string")?d.language:"ge",m=(function(){var e={},aj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ai;for(ai=0;ai<aj.length;ai++){e[ai]=aj.charAt(ai)}return e}()),p=(function(){var e={},aj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ai;for(ai=0;ai<aj.length;ai++){e[aj.charAt(ai)]=ai}return e}()),g=d.dataAlign4,B=[0],L={},h=false,a=0,u=0;if(typeof d.serviceUrl!=="string"){k("TAME library error: Service URL is not a string!");return}if(typeof d.amsNetId!=="string"){k("TAME library error: NetId is not a string!");return}if(typeof d.amsPort!==undefined){d.amsPort="801";k("TAME library warning: AMS port number is not set! Default port 801 will be used.")}else{if(typeof d.amsPort==="number"){k("TAME library warning: AMS port number is not a string! Trying to convert it.");d.amsPort=d.amsPort.toString(10)}}if(parseInt(d.amsPort,10)<801||parseInt(d.amsPort,10)>804){k("TAME library error: AMS Port Number ("+parseInt(d.amsPort,10)+") is out of range!");return}if(d.syncXmlHttp===true){k('TAME library info: The "syncXmlHttp" parameter was set. Synchronous XMLHttpRequests are used by default.')}if(typeof d.serviceUser==="string"&&typeof d.servicePassword==="string"){k("TAME library info: Username and password set. Authenticated requests will be used.")}else{d.serviceUser=null;d.servicePassword=null}this.dateNames={weekdShort:TAME.weekdShortNames[f],weekdLong:TAME.weekdLongNames[f],monthsShort:TAME.monthsShortNames[f],monthsLong:TAME.monthsLongNames[f]};this.maxStringLen=255;this.maxDropReq=10;this.useCheckBounds=true;this.adsState=null;this.adsStateTxt="";this.deviceState=null;function x(e,ak,aj,am,ap){var al=[],ao=0,an=[],ai=0;if(typeof e==="number"){al[0]=e.toString(10)}else{if(typeof e==="string"){al=e.split(".")}else{k("TAME library error: Can't parse name of object/variable. Name is not a string or number!");k(e);return}}if(aj===undefined){aj=window}ao=al.length-1;while(ai<ao){if(al[ai].charAt(al[ai].length-1)==="]"){an=al[ai].substring(0,al[ai].length-1).split("[");aj=aj[an[0]][an[1]]}else{if(aj[al[ai]]===undefined){aj[al[ai]]=[]}aj=aj[al[ai]]}ai++}if(al[ai].charAt(al[ai].length-1)==="]"){an=al[ai].substring(0,al[ai].length-1).split("[");aj=aj[an[0]];if(ak!==undefined){if(typeof am==="string"){ak=am+ak}if(typeof ap==="string"){ak=ak+ap}aj[an[1]]=ak}return aj[an[1]]}if(ak!==undefined){if(typeof am==="string"){ak=am+ak}if(typeof ap==="string"){ak=ak+ap}aj[al[ai]]=ak}return aj[al[ai]]}function ag(e){if(e===undefined){return false}if(!isNaN(e)&&e>0&&e<=V.maxStringLen){return true}k("TAME library error: User defined string length not valid! length: "+e);k("Max. string length: "+V.maxStringLen);return false}function w(aj){var ai;if(aj.addr){if(typeof aj.addr==="string"&&aj.addr.charAt(0)==="%"){if(aj.addr.charAt(2)==="X"){ai=l[aj.addr.substr(1,2)]}else{ai=l[aj.addr.substr(1,1)]}}else{k('TAME library error: Wrong address definition, should be a string and start with "%"!');k(aj);return}}else{if(aj.name){if(typeof aj.name==="string"){try{ai=L[aj.name].indexGroup}catch(ak){k("TAME library error: Can't get the IndexGroup for this request!");k("TAME library error: Please check the variable name.");k(ak);k(aj);return}}else{k("TAME library error: Varible name should be a string!");k(aj);return}}else{k("TAME library error: Neither a name nor an address for the variable/request defined!");k(aj);return}}if(isNaN(ai)){k("TAME library error: IndexGroup is not a number, check address or name definition of the variable/request!");k(aj)}return ai}function j(aj){var am,ai="",ak=[];if(aj.addr){if(typeof aj.addr==="string"&&aj.addr.charAt(0)==="%"){if(aj.addr.charAt(2)==="X"){ai=aj.addr.substr(3);ak=ai.split(".");am=parseInt(ak[0],10)*8+parseInt(ak[1],10)}else{am=parseInt(aj.addr.substr(3),10);if(typeof aj.addrOffset==="number"){am+=aj.addrOffset}}}else{k('TAME library error: Wrong address definition, should be a string and start with "%"!');k(aj);return}}else{if(aj.name){if(typeof aj.name==="string"){try{am=L[aj.name].indexOffset;if(typeof aj.addrOffset==="number"){am+=aj.addrOffset}}catch(al){k("TAME library error: Can't get the IndexOffset for this request!");k("TAME library error: Please check the variable name.");k(al);k(aj);return}}else{k("TAME library error: Varible name should be a string!");k(aj);return}}else{k("TAME library error: Neither a name nor an address for the variable/request defined!");k(aj);return}}if(isNaN(am)){k("TAME library error: IndexOffset is not a number, check address or name definition of the variable/request.");k(aj)}return am}function U(){var aj;if(window.XMLHttpRequest){aj=new window.XMLHttpRequest()}else{try{aj=new window.ActiveXObject("Msxml2.XMLHTTP")}catch(ak){try{aj=new window.ActiveXObject("Microsoft.XMLHTTP")}catch(ai){aj=null;k("TAME library error: Failed Creating XMLHttpRequest-Object!")}}}return aj}function t(e){if(e.reqDescr===undefined){e.reqDescr={}}else{if(e.reqDescr.debug){k(e)}}e.send=function(){var ai,aj;if(typeof this.reqDescr.id==="number"&&B[this.reqDescr.id]>0){k("TAME library warning: Request dropped (last request with ID "+e.reqDescr.id+" not finished!)");B[this.reqDescr.id]++;if(B[this.reqDescr.id]<=V.maxDropReq){return}B[this.reqDescr.id]=0}if(e.sync===true){aj=false}else{if(this.reqDescr.sync===true){aj=false}else{if(this.reqDescr.sync===false){aj=true}else{if(d.syncXmlHttp===true){aj=false}else{aj=true}}}}this.xmlHttpReq=U();ai="<?xml version='1.0' encoding='utf-8'?>";ai+="<soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' ";ai+="xmlns:xsd='http://www.w3.org/2001/XMLSchema' ";ai+="xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>";ai+="<soap:Body><q1:";ai+=this.method;ai+=" xmlns:q1='http://beckhoff.org/message/'><netId xsi:type='xsd:string'>";ai+=d.amsNetId;ai+="</netId><nPort xsi:type='xsd:int'>";ai+=d.amsPort;ai+="</nPort>";if(this.indexGroup!==undefined){ai+="<indexGroup xsi:type='xsd:unsignedInt'>";ai+=this.indexGroup;ai+="</indexGroup>"}if(this.indexOffset!==undefined){ai+="<indexOffset xsi:type='xsd:unsignedInt'>";ai+=this.indexOffset;ai+="</indexOffset>"}if((this.method==="Read"||this.method==="ReadWrite")&&this.reqDescr.readLength>0){ai+="<cbRdLen xsi:type='xsd:int'>";ai+=this.reqDescr.readLength;ai+="</cbRdLen>"}if(this.pData&&this.pData.length>0){ai+="<pData xsi:type='xsd:base64Binary'>";ai+=this.pData;ai+="</pData>"}if(this.pwrData&&this.pwrData.length>0){ai+="<pwrData xsi:type='xsd:base64Binary'>";ai+=this.pwrData;ai+="</pwrData>"}ai+="</q1:";ai+=this.method;ai+="></soap:Body></soap:Envelope>";if(typeof this.xmlHttpReq==="object"){this.xmlHttpReq.open("POST",d.serviceUrl,aj,d.serviceUser,d.servicePassword);this.xmlHttpReq.setRequestHeader("SOAPAction","http://beckhoff.org/action/TcAdsSync."+this.method);this.xmlHttpReq.setRequestHeader("Content-Type","text/xml; charset=utf-8");if(aj===true){this.xmlHttpReq.onreadystatechange=function(){if((e.xmlHttpReq.readyState===4)&&(e.xmlHttpReq.status===200)){V.parseResponse(e)}};this.xmlHttpReq.send(ai)}else{this.xmlHttpReq.send(ai);V.parseResponse(e)}if(typeof this.reqDescr.id==="number"){B[this.reqDescr.id]=1}}};return e}function Q(ak,aj,ai,e){var al;if(typeof ak.val==="string"){if(aj==="REAL"||aj==="LREAL"){al=parseFloat(ak.val)}else{al=parseInt(ak.val,10)}}else{if(typeof ak.val==="number"){al=ak.val}else{k("TAME library error: Wrong variable type for a numeric variable in write request!");k("TAME library error: Variable type should be number or string, but is "+typeof ak.val);k(ak);al=0}}if(isNaN(al)){al=0;k("TAME library error: Value of a numeric variable in write request is not a number.");k(ak)}if(V.useCheckBounds===true){if(aj==="LREAL"){if(!isFinite(al)){k("TAME library warning: Limit for LREAL value exceeded!");k("Upper limit: "+Number.MAX_VALUE);k("Lower limit: "+Number.MIN_VALUE);k("value: "+al);k(ak)}}else{if(aj==="REAL"){if(al>0){if(al<1.175495e-38){k("TAME library warning: Lower limit for positive REAL value exceeded!");k("limit: 1.175495e-38");k("value: "+al);k(ak);al=1.175495e-38}else{if(al>3.402823e+38){k("TAME library warning: Upper limit for positive REAL value exceeded!");k("limit: 3.402823e+38");k("value: "+al);k(ak);al=3.402823e+38}}}else{if(al<0){if(al>-1.175495e-38){k("TAME library warning: Upper limit for negative REAL value exceeded!");k("limit: -1.175495e-38");k("value: "+al);k(ak);al=-1.175495e-38}else{if(al<-3.402823e+38){k("TAME library warning: Lower limit for negative REAL value exceeded!");k("limit: -3.402823e+38");k("value: "+al);k(ak);al=-3.402823e+38}}}}}else{if(al<ai){k("TAME library warning: Lower limit for numeric value exceeded!");k("type: "+aj);k("limit: "+ai);k("value: "+al);k(ak);al=ai}else{if(al>e){k("TAME library warning: Upper limit for numeric value exceeded!");k("type: "+aj);k("limit: "+e);k("value: "+al);k(ak);al=e}}}}}return al}function ad(aj){var ai=[];if(typeof aj.type==="string"){ai=aj.type.split(".");if(ai.length>2){ai[1]=ai.slice(1).join(".")}}else{if(h&&typeof aj.name==="string"){try{ai[0]=L[aj.name].type;if(ai[0]==="STRING"){ai[1]=L[aj.name].stringLength}else{if(typeof aj.format==="string"){ai[1]=aj.format}else{if(typeof aj.decPlaces==="number"){ai[1]=aj.decPlaces}else{if(typeof aj.dp==="number"){ai[1]=aj.dp}}}}}catch(ak){k("TAME library error: A problem occured while reading a data type from the symbol table!");k(ak);k(aj)}}else{k("TAME library error: Could not get the type of the item!");k(aj)}}return ai}function G(e){if((e>=97)&&(e<=102)){return(e-87)}if((e>=65)&&(e<=70)){return(e-55)}if((e>=48)&&(e<=57)){return(e-48)}return 0}function ab(al,ai){var e=[],ak=al.toString(16),aj;while(ak.length<ai*2){ak="0"+ak}for(aj=0;aj<ai;aj++){e[(ai-1)-aj]=((G(ak.charCodeAt(aj*2))*16)+G(ak.charCodeAt((aj*2)+1)))}return e}function r(ai){var al=0,ao=0,am,e,ak,an,aj;e=Math.abs(ai);if(ai!==0){for(aj=128;aj>-127;aj--){ak=e/Math.pow(2,aj);if(ak>=2){break}an=aj;am=ak}an+=127;am=am.toString(2);for(aj=2;aj<25;aj++){al<<=1;if(am.charAt(aj)==="1"){al+=1}}if(am.charAt(25)==="1"){al+=1}ao=an;ao<<=23;ao+=al;if(ai<0){ao+=2147483648}}return ao}function A(an){var aj=0,ap=0,ak={part1:0,part2:0},aq,am,ai,e,ao,al;aq=Math.abs(an);if(an!==0){for(al=1024;al>=-1023;al--){am=aq/Math.pow(2,al);if(am>=2){break}ai=al;ao=am}ai+=1023;ao=ao.toString(2);for(al=2;al<22;al++){aj<<=1;if(ao.charAt(al)==="1"){aj+=1}}if(ao.charAt(al)==="1"){e=true}al++;for(al;al<54;al++){ap<<=1;if(ao.charAt(al)==="1"){ap+=1}}ak.part1=ai;ak.part1<<=20;ak.part1+=aj;if(an<0){ak.part1+=2147483648}ak.part2=ap;if(e===true){ak.part2+=2147483648}}return ak}function H(aj,ai){var e;switch(ai){case"#d":case"#dd":e=aj*86400000;break;case"#h":case"#hh":e=aj*3600000;break;case"#m":case"#mm":e=aj*60000;break;case"#s":case"#ss":e=aj*1000;break;case"#ms":case"#msmsms":e=aj;break;default:e=aj;break}return e}function z(ao,aq){var e=aq.split("#"),an=e.length,ap=/:|\.|-|_/,aj=0,ai=0,al,ak,am,ar;for(ak=1;ak<an;ak++){if(ap.test(e[ak])===true){ar=true}}if(ar!==true){k("TAME library error: No separator ( : . - _ ) for TOD string found!");k("String: "+ao);k("Format: "+aq);return 0}am=ao.split(ap);for(ak=1;ak<an;ak++){switch(e[ak]){case"h":case"hh":al=parseInt(am[ai],10)*3600000;ai++;break;case"m":case"mm":al=parseInt(am[ai],10)*60000;ai++;break;case"s":case"ss":al=parseInt(am[ai],10)*1000;ai++;break;case"ms":case"msmsms":al=parseInt(am[ai],10);ai++;break;default:al=0}aj+=al}return aj}function o(an){var am=m,ak=0,ai="",al,aj,e;while(ak<an.length){al=an[ak++];aj=an[ak++];e=an[ak++];ai=ai+am[al>>2]+am[((al&3)<<4)|(aj>>4)]+(isNaN(aj)?"=":am[(((aj&15)<<2)|(e>>6))])+((isNaN(aj)||isNaN(e))?"=":am[e&63])}return ai}function c(an,al,am,ak){var ap=[],e,ao,ai,aj;if(an.val===undefined){switch(al){case"STRING":an.val="";break;case"DATE":case"DT":case"TOD":an.val=new Date();break;default:an.val=0;break}k("TAME library warning: Value of a variable in write request is not defined!");k(an)}switch(al){case"BOOL":if(an.val){ap[0]=1}else{ap[0]=0}break;case"BYTE":case"USINT":e=Q(an,al,0,255);ap=ab(e,ak);break;case"SINT":e=Q(an,al,-128,127);if(e<0){e=e+256}ap=ab(e,ak);break;case"WORD":case"UINT":e=Q(an,al,0,65535);ap=ab(e,ak);break;case"INT":case"INT16":e=Q(an,al,-32768,32767);if(e<0){e=e+65536}ap=ab(e,ak);break;case"INT1DP":an.val=Math.round(an.val*10);e=Q(an,al,-32768,32767);if(e<0){e=e+65536}ap=ab(e,ak);break;case"DWORD":case"UDINT":e=Q(an,al,0,4294967295);ap=ab(e,ak);break;case"DINT":e=Q(an,al,-2147483648,2147483647);if(e<0){e=e+4294967296}ap=ab(e,ak);break;case"REAL":e=Q(an,al);e=r(e);ap=ab(e,ak);break;case"LREAL":e=Q(an,al);e=A(e);ap=ab(e.part2,ak);ap=ap.concat(ab(e.part1,ak));break;case"DATE":if(typeof an.val==="object"){an.val.setHours(0);an.val.setMinutes(0);an.val.setSeconds(0);e=an.val.getTime()/1000-an.val.getTimezoneOffset()*60}else{k("TAME library error: Date is not an object!");k(an)}ap=ab(e,ak);break;case"DT":if(typeof an.val==="object"){e=an.val.getTime()/1000-an.val.getTimezoneOffset()*60}else{k("TAME library error: Date is not an object!");k(an)}ap=ab(e,ak);break;case"TOD":if(typeof an.val==="object"){an.val.setYear(1970);an.val.setMonth(0);an.val.setDate(1);e=an.val.getTime()-an.val.getTimezoneOffset()*60000}else{if(typeof an.val==="string"){if(am===""||am===undefined){am="#hh#:#mm";k("TAME library warning: No format given for TOD string! Using default #hh#:#mm.");k(an)}e=z(an.val,am)}else{k("TAME library error: Time of day is wether a date object nor a string!");k(an)}}ap=ab(e,ak);break;case"STRING":ao=(am===undefined)?y.STRING:parseInt(am,10);if(ag(ao)){ai=ao<an.val.length?ao:an.val.length;for(aj=0;aj<ai;aj++){ap[aj]=an.val.charCodeAt(aj)}for(aj;aj<ao;aj++){ap[aj]=0}ap[aj]=0}break;case"TIME":e=parseInt(an.val,10);e=H(e,am);if(e<0){e=0;k("TAME library warning: Lower limit for TIME variable exceeded!)");k("value: "+an.val+am);k(an)}else{if(e>4294967295){e=4294967295;k("TAME library warning: Upper limit for TIME variable exceeded!)");k("value: "+an.val+am);k(an)}}ap=ab(e,ak);break;case"EndStruct":break;default:k("TAME library error: Unknown data type in write request : "+al);break}return ap}function s(ai){var e=ai.toString(16);if((e.length%2)!==0){e="0"+e}return e}function i(ai,e){e=(isNaN(e))?0:e;var aj=ai.toString(10);while(aj.length<e){aj="0"+aj}return aj}function ah(an,am){var e=am.split("#"),al=e.length,ai="",ak,aj;for(aj=1;aj<al;aj++){switch(e[aj]){case"D":ak=an.getDate();break;case"DD":ak=an.getDate();ak=i(ak,2);break;case"WD":ak=an.getDay();break;case"WKD":ak=V.dateNames.weekdShort[an.getDay()];break;case"WEEKDAY":ak=V.dateNames.weekdLong[an.getDay()];break;case"M":ak=an.getMonth()+1;break;case"MM":ak=an.getMonth()+1;ak=i(ak,2);break;case"MON":ak=V.dateNames.monthsShort[an.getMonth()];break;case"MONTH":ak=V.dateNames.monthsLong[an.getMonth()];break;case"YY":ak=an.getYear();while(ak>100){ak-=100}break;case"YYYY":ak=an.getFullYear();break;case"h":ak=an.getHours();break;case"hh":ak=an.getHours();ak=i(ak,2);break;case"m":ak=an.getMinutes();break;case"mm":ak=an.getMinutes();ak=i(ak,2);break;case"s":ak=an.getSeconds();break;case"ss":ak=an.getSeconds();ak=i(ak,2);break;case"ms":ak=an.getMilliseconds();break;case"msmsms":ak=an.getMilliseconds();ak=i(ak,3);break;default:ak=e[aj];break}ai=ai+ak}return ai}function F(an,am){var e=am.split("#"),al=e.length,ai="",ak,aj;for(aj=1;aj<al;aj++){switch(e[aj]){case"d":if(al<=2){ak=an/86400000}else{ak=Math.floor(an/86400000);an=an%86400000}break;case"dd":if(al<=2){ak=an/86400000}else{ak=Math.floor(an/86400000);an=an%86400000}ak=i(ak,2);break;case"h":if(al<=2){ak=an/3600000}else{ak=Math.floor(an/3600000);an=an%3600000}break;case"hh":if(al<=2){ak=an/3600000}else{ak=Math.floor(an/3600000);an=an%3600000}ak=i(ak,2);break;case"m":if(al<=2){ak=an/60000}else{ak=Math.floor(an/60000);an=an%60000}break;case"mm":if(al<=2){ak=an/60000}else{ak=Math.floor(an/60000);an=an%60000}ak=i(ak,2);break;case"s":if(al<=2){ak=an/1000}else{ak=Math.floor(an/1000);an=an%1000}break;case"ss":if(al<=2){ak=an/1000}else{ak=Math.floor(an/1000);an=an%1000}ak=i(ak,2);break;case"ms":ak=an;break;case"msmsms":ak=an;ak=i(ak,3);break;default:ak=e[aj];break}ai=ai+ak}return ai}function O(ai){var e=s(ai.charCodeAt(0));return parseInt(e,16)}function ac(e){var ai=O(e);if(ai>127){ai=ai-256}return ai}function K(ai){var e=s(ai.charCodeAt(1));e+=s(ai.charCodeAt(0));return parseInt(e,16)}function J(e){var ai=K(e);if(ai>32767){ai=ai-65536}return ai}function D(ai){var e=s(ai.charCodeAt(3));e+=s(ai.charCodeAt(2));e+=s(ai.charCodeAt(1));e+=s(ai.charCodeAt(0));return parseInt(e,16)}function M(e){var ai=D(e);if(ai>2147483647){ai=ai-4294967296}return ai}function T(e,aj){var ai=D(e);if(aj===undefined){return ai}return(F(ai,aj))}function n(e,aj){var ai=new Date(D(e));ai=new Date(ai.getTime()+ai.getTimezoneOffset()*60000);if(aj===undefined){return ai}return(ah(ai,aj))}function aa(ai,aj){var e=new Date(D(ai)*1000);e=new Date(e.getTime()+e.getTimezoneOffset()*60000);if(aj===undefined){return e}return(ah(e,aj))}function q(aj){var al=1,an=0.5,ai=D(aj),e,am,ak;if(ai===0){return 0}e=((ai>>>31)===1)?"-":"+";ai<<=1;am=(ai>>>24)-127;ai<<=8;for(ak=1;ak<=23;ak++){al+=ai<0?an:0;ai<<=1;an/=2}return parseFloat(e+(al*Math.pow(2,am)))}function C(aj){var ai=D(aj.substring(4,8)),am=D(aj.substring(0,4)),al=12,ak=1,ao=0.5,e,an;if(ai===0&&am===0){return 0}e=((ai>>>31)===1)?"-":"+";ai<<=1;an=(ai>>>21)-1023;ai<<=11;while(al<32){ak+=ai<0?ao:0;ai<<=1;ao/=2;al++}if((am>>>31)===1){ak+=ao;am<<=1;ao/=2}while(al<64){ak+=am<0?ao:0;am<<=1;ao/=2;al++}return parseFloat(e+(ak*Math.pow(2,an)))}function Y(e){return e.split(String.fromCharCode(0))[0]}function N(ak){var al=p,an=0,e="",am,aj,ai,ar,aq,ap,ao;ak=ak.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{ar=al[ak.charAt(an++)];aq=al[ak.charAt(an++)];ap=al[ak.charAt(an++)];ao=al[ak.charAt(an++)];am=(ar<<2)|(aq>>4);aj=((aq&15)<<4)|(ap>>2);ai=((ap&3)<<6)|ao;e+=String.fromCharCode(am);if(ap!==64){e+=String.fromCharCode(aj)}if(ao!==64){e+=String.fromCharCode(ai)}}while(an<ak.length);return e}function R(ai,e,ak){var aj;switch(e){case"BOOL":aj=(ai.charCodeAt(0)!="0");break;case"BYTE":case"USINT":aj=O(ai);break;case"SINT":aj=ac(ai);break;case"WORD":case"UINT":aj=K(ai);break;case"INT":case"INT16":aj=J(ai);break;case"INT1DP":aj=((J(ai))/10).toFixed(1);break;case"DWORD":case"UDINT":aj=D(ai);break;case"DINT":aj=M(ai);break;case"REAL":aj=q(ai);if(ak!==undefined){aj=aj.toFixed(parseInt(ak,10))}break;case"LREAL":aj=C(ai);if(ak!==undefined){aj=aj.toFixed(parseInt(ak,10))}break;case"STRING":aj=Y(ai);break;case"TOD":aj=n(ai,ak);break;case"TIME":aj=T(ai,ak);break;case"DT":case"DATE":aj=aa(ai,ak);break;case"EndStruct":break;default:k("TAME library error: Unknown data type at parsing read request: "+e);break}return aj}function v(aB){var ai,at=aB.reqDescr.items,aq=[],au=0,ay,ak,al,aA,ao,aw,ap,az,aj,av,ar,am,an;try{ai=aB.xmlHttpReq.responseXML.documentElement;ak=N(ai.getElementsByTagName("ppData")[0].firstChild.data);for(ar=0,am=at.length;ar<am;ar++){ay=at[ar];aq=ad(ay);aj=aq[0];av=aq[1];aw=y[aj];switch(aj){case"STRING":if(av!==undefined){ao=parseInt(av,10)}aw=(ag(ao)?ao:aw)+1;break;case"EndStruct":aw=ay.val;break}ap=aw<4?aw:4;if(aB.reqDescr.seq!==true){an=j(aB.reqDescr);au=ay.addr-an}else{if(aB.reqDescr.dataAlign4===true&&ap>1&&aj!=="STRING"&&au>0){az=au%ap;if(az>0){au+=ap-az}}}al=ak.substr(au,aw);aA=R(al,aj,av);if(aj!=="EndStruct"){x(ay.jvar,aA,aB.reqDescr.dataObj,ay.prefix,ay.suffix)}if(aB.reqDescr.seq===true){au+=aw}}}catch(ax){k("TAME library error: Parsing of Read Request failed:"+ax);k(ay);return}}function b(aI){var ai,av=aI.reqDescr.items,at=[],az=0,ak=0,ax=window,aF,am,an,aH,aB,al,aA,au,aq,ao,aw,ay,ar,aE,ap;function aD(){var aJ,e;if(g===true&&al!=="STRING"){aJ=aB<4?aB:4;if(aJ>1&&ak>0){e=ak%aJ;if(e>0){ak+=aJ-e}}if(aJ>aE){aE=aJ}}}function aj(){var aJ,e;if(al==="STRING"){if(aA!==undefined){aJ=parseInt(aA,10)}else{if(typeof L[aF.name].stringLength==="number"){aJ=L[aF.name].stringLength}}aB=(ag(aJ)?aJ:aB)+1}e=an.substr(ak,aB);aH=R(e,al,aA);x(aw,aH,ax,aF.prefix,aF.suffix);ak+=aB}function aG(){var aJ,e,aN,aM,aK,aL;for(aL in aF.def){if(aF.def.hasOwnProperty(aL)){e=aF.def[aL].split(".");if(e[0]==="ARRAY"){aN=parseInt(e[1],10);aM=e.length-1;for(aJ=0;aJ<aN;aJ++){al=e[2];if(e[aM]==="SP"){aw=aL+aJ;if(aM>=4){aA=e.slice(3,-1).join(".")}}else{aw=aL+"."+aJ;if(aM>=3){aA=e.slice(3).join(".")}}if(ay!==undefined){aw=ay+"."+aw}aB=y[al];aD();aj()}}else{if(ay!==undefined){aw=ay+"."+aL}else{aw=aL}al=e[0];aA=e.slice(1).join(".");aB=y[al];aD();aj()}}}if(g===true&&aE>1&&al!=="STRING"){if(aE>4){aE=4}aK=ak%aE;if(aK>0){ak+=aE-aK}}}try{ai=aI.xmlHttpReq.responseXML.documentElement;am=N(ai.getElementsByTagName("ppRdData")[0].firstChild.data);for(au=0,aq=av.length;au<aq;au++){an=am.substr(az,4);ao=R(an,"DWORD");if(ao!==0){k("TAME library error: ADS sub command error while processing a SumReadRequest!");k("Error code: "+ao);k(av[au])}az+=4}for(au=0;au<aq;au++){aF=av[au];at=ad(aF);al=at[0];aA=at[1];ap=L[aF.name].size;an=am.substr(az,ap);switch(al){case"ARRAY":ax=x(aF.jvar);ak=0;ar=L[aF.name].arrayLength;if(L[aF.name].arrayDataType==="USER"){for(ay=0;ay<ar;ay++){aG()}}else{al=L[aF.name].arrayDataType;aB=y[al];for(ay=0;ay<ar;ay++){aw=ay;aj()}}break;case"USER":ax=x(aF.jvar);ak=0;aG();break;default:ax=window;aH=R(an,al,aA);x(aF.jvar,aH,ax,aF.prefix,aF.suffix)}az+=ap}}catch(aC){k("TAME library error: Parsing of SumReadRequest failed:"+aC);k(aF);return}}function ae(ak){var ai;try{ai=ak.xmlHttpReq.responseXML.documentElement;V.adsState=parseInt(ai.getElementsByTagName("pAdsState")[0].firstChild.data,10);V.adsStateTxt=P[V.adsState];V.deviceState=parseInt(ai.getElementsByTagName("pDeviceState")[0].firstChild.data,10)}catch(aj){k("TAME library error: Parsing of ADS Read State Request failed:"+aj);return}}function I(ao,am,ak){var aj={},al,ai;ai=y[am];if(typeof ak.name==="string"){ak.name=ak.name.toUpperCase()}switch(am){case"STRING":if(ag(ak.strlen)){am+="."+ak.strlen;ai=ak.strlen}else{if(h===true){try{ai=L[ak.name].stringLength;am+="."+ai}catch(an){k("TAME library error: A problem occured while reading the string length from the symbol table!");k(an)}}}ai++;break;case"TIME":case"TOD":case"DT":case"DATE":if(typeof ak.format==="string"){am+="."+ak.format}break;case"REAL":case"LREAL":if(typeof ak.decPlaces==="number"){am+="."+ak.decPlaces}else{if(typeof ak.dp==="number"){am+="."+ak.dp}}break}aj={addr:ak.addr,name:ak.name,id:ak.id,oc:ak.oc,ocd:ak.ocd,readLength:ai,debug:ak.debug,sync:ak.sync,seq:true,items:[{val:ak.val,jvar:ak.jvar,type:am,prefix:ak.prefix,suffix:ak.suffix}]};if(ao==="Write"){V.writeReq(aj)}else{V.readReq(aj)}}function E(al,am,ak){var an={},az={},au,aj,aB=0,aC=0,aA=0,aD,ai=[],aG,ap,at=0,av,aq,aF=0,aw=0,aI,ar,aH,ax;if(typeof ak.name==="string"){ak.name=ak.name.toUpperCase()}if(al==="Write"&&typeof ak.val==="object"){az=ak.val}else{if(typeof ak.jvar==="string"){az=x(ak.jvar)}else{k("TAME library error: No data object for this "+al+"-Request defined!")}}if(typeof ak.arrlen==="number"){au=ak.arrlen}else{if(h===true){try{au=L[ak.name].arrayLength}catch(aE){k("TAME library error: A proble occured while reading the array length from the symbol table!");k(aE)}}else{k("TAME library error: Can't get the array length for this request!")}}if(typeof ak.item==="number"&&!isNaN(ak.item)&&al==="Write"){aH=true;if(ak.item<0||ak.item>au-1){k('TAME library error: Wrong value for "item"!');k("item: "+ak.item);k("Last array index: "+(au-1))}}function ao(){var e;if(typeof ak.def==="string"){ak.def=x(ak.def)}else{if(typeof ak.def!=="object"){k("TAME library error: No structure definition found!")}}for(e in ak.def){if(ak.def.hasOwnProperty(e)){ai=ak.def[e].split(".");if(ai[0]==="ARRAY"){aG=parseInt(ai[1],10);ai.shift();ai.shift()}else{aG=1}for(aC=0;aC<aG;aC++){if(ai[0]==="STRING"){if(typeof ai[1]==="string"){av=parseInt(ai[1],10)}aq=(ag(av)?av:y[ai[0]])+1}else{aq=y[ai[0]]}if(g===true&&aq>1&&ai[0]!=="STRING"&&at>0){aI=at%aq;if(aI>0){at+=aq-aI}}at+=aq}if(g===true&&aq>aF&&ai[0]!=="STRING"){aF=aq}}}if(g===true&&aF>1&&ai[0]!=="STRING"){if(aF>4){aF=4}aI=at%aF;if(aI>0){aw=aF-aI;at+=aw}}if(aH){aj=at*ak.item;au=1}an={addr:ak.addr,name:ak.name,addrOffset:aj,id:ak.id,oc:ak.oc,ocd:ak.ocd,debug:ak.debug,readLength:at*au,seq:true,dataAlign4:g,dataObj:az,sync:ak.sync,items:[]};for(aC=0;aC<au;aC++){for(e in ak.def){if(ak.def.hasOwnProperty(e)){ai=ak.def[e].split(".");if(ai[0]==="ARRAY"){aG=parseInt(ai[1],10);ap=ai.length-1;for(aA=0;aA<aG;aA++){if(ai[ap]==="SP"){an.items[aB]={jvar:aC+"."+e+aA};if(ap===4){an.items[aB].type=ai[2]+"."+ai[3]}else{an.items[aB].type=ai[2]}}else{an.items[aB]={jvar:aC+"."+e+"."+aA};if(ap===3){an.items[aB].type=ai[2]+"."+ai[3]}else{an.items[aB].type=ai[2]}}if(al==="Write"){if(aH){if(ai[ap]==="SP"){an.items[aB].val=az[ak.item][e+aA]}else{an.items[aB].val=az[ak.item][e][aA]}}else{if(ai[ap]==="SP"){an.items[aB].val=az[aC][e+aA]}else{an.items[aB].val=az[aC][e][aA]}}}aB++}}else{an.items[aB]={jvar:aC+"."+e,type:ak.def[e]};if(al==="Write"){if(aH){an.items[aB].val=az[ak.item][e]}else{an.items[aB].val=az[aC][e]}}aB++}}}if(g===true){an.items[aB]={type:"EndStruct",val:aw};aB++}}}function ay(){aD=y[am];switch(am){case"STRING":if(ag(ak.strlen)){am+="."+ak.strlen;aD=ak.strlen}else{if(h===true){aD=L[ak.name].stringLength;am+="."+aD}}aD++;break;case"TIME":case"TOD":case"DT":case"DATE":if(typeof ak.format==="string"){am+="."+ak.format}break;case"REAL":case"LREAL":if(typeof ak.decPlaces==="number"){am+="."+ak.decPlaces}else{if(typeof ak.dp==="number"){am+="."+ak.dp}}break}if(aH){aj=ak.item*aD;au=1}an={addr:ak.addr,name:ak.name,addrOffset:aj,id:ak.id,oc:ak.oc,ocd:ak.ocd,readLength:aD*au,debug:ak.debug,seq:true,dataObj:az,items:[]};for(aC=0;aC<au;aC++){an.items[aC]={jvar:aC,type:am};if(al==="Write"){if(aH){an.items[aC].val=az[ak.item]}else{an.items[aC].val=az[aC]}}}}if(am==="STRUCT"){ao()}else{ay()}if(al==="Write"){V.writeReq(an)}else{V.readReq(an)}}function X(e,ap){var am={},ai={},aq=[],ak=0,ao,aj,al,an;if(typeof ap.name==="string"){ap.name=ap.name.toUpperCase()}if(e==="Write"&&typeof ap.val==="object"){ai=ap.val}else{if(typeof ap.jvar==="string"){ai=x(ap.jvar)}else{k("TAME library error: No data object for this "+e+"-Request defined!")}}if(typeof ap.def==="string"){ap.def=x(ap.def)}else{if(typeof ap.def!=="object"){k("TAME library error: No structure defininition found!")}}am={addr:ap.addr,name:ap.name,id:ap.id,oc:ap.oc,ocd:ap.ocd,debug:ap.debug,seq:true,dataAlign4:g,dataObj:ai,sync:ap.sync,items:[]};for(al in ap.def){if(ap.def.hasOwnProperty(al)){aq=ap.def[al].split(".");if(aq[0]==="ARRAY"){aj=parseInt(aq[1],10);ao=aq.length-1;for(an=0;an<aj;an++){if(aq[ao]==="SP"){am.items[ak]={jvar:al+an};if(ao===4){am.items[ak].type=aq[2]+"."+aq[3]}else{am.items[ak].type=aq[2]}}else{am.items[ak]={jvar:al+"."+an};if(ao===3){am.items[ak].type=aq[2]+"."+aq[3]}else{am.items[ak].type=aq[2]}}if(e==="Write"){if(aq[ao]==="SP"){am.items[ak].val=ai[al+an]}else{am.items[ak].val=ai[al][an]}}ak++}}else{am.items[ak]={jvar:al,type:ap.def[al]};if(e==="Write"){am.items[ak].val=ai[al]}ak++}}}if(e==="Write"){V.writeReq(am)}else{V.readReq(am)}}this.writeReq=function(ak){var am=ak.items,au={},e=[],ap=[],ax=[],ao,at,aj,an,ai,av,aq,aw,al,ar;if(typeof ak.name==="string"){ak.name=ak.name.toUpperCase()}for(ar=0,aj=am.length;ar<aj;ar++){aw=am[ar];ap=ad(aw);ao=ap[0];at=ap[1];if(isNaN(y[ao])){k("TAME library error: Could not get the length of the data type: "+ao);k("TAME library error: Probably wrong type definition. Please check the manual.");k(ak);return}an=(y[ao]<4)?y[ao]:4;if(ak.dataAlign4===true&&an>1&&ao!=="STRING"&&e.length>0){aq=e.length%an;if(aq>0){av=an-aq;for(al=1;al<=av;al++){e.push(0)}}}if(ao==="EndStruct"){for(al=1;al<=aw.val;al++){e.push(0)}}else{ax=c(aw,ao,at,an);e=e.concat(ax)}}if(e&&e.length>0){e=o(e)}au={method:"Write",indexGroup:w(ak),indexOffset:j(ak),pData:e,reqDescr:ak};t(au).send()};this.readReq=function(aj){var ar={},ak=aj.items,am=[],at,aq,al,e,an,ao,au,ap,ai;if(typeof aj.name==="string"){aj.name=aj.name.toUpperCase()}if(typeof aj.readLength!=="number"){aj.readLength=0;for(ap=0,e=ak.length;ap<e;ap++){at=ak[ap];am=ad(at);al=am[0];aq=am[1];if(isNaN(y[al])){k("TAME library error: Could not get the length of the data type: "+al);k("TAME library error: Probably wrong type definition. Please check the manual.");k(aj);return}if(al==="STRING"){if(typeof aq==="string"){au=parseInt(aq,10)}ao=(ag(au)?au:y[al])+1}else{ao=y[al]}if(aj.seq===true){if(aj.dataAlign4===true&&ao>1&&al!=="STRING"&&aj.readLength>0){an=aj.readLength%ao;if(an>0){aj.readLength+=ao-an}}aj.readLength+=ao}else{ai=j(aj);aj.readLength=ao+at.addr-ai}}}ar={method:"Read",indexGroup:w(aj),indexOffset:j(aj),reqDescr:aj};t(ar).send()};this.sumReadReq=function(aj){var at={},am=aj.items,ap=[],av=[],aw=[],al=0,ai=am.length,ak={},ao,ar,au,aq,an,e;aj.readLength=ai*4;for(aq=0;aq<ai;aq++){au=am[aq];if(typeof au.name==="string"){au.name=au.name.toUpperCase()}ap=ad(au);ao=ap[0];ar=ap[1];an=L[au.name].size;aj.readLength+=an;ak.val=w(au);aw=c(ak,"UDINT",ar,4);av=av.concat(aw);ak.val=j(au);aw=c(ak,"UDINT",ar,4);av=av.concat(aw);ak.val=an;aw=c(ak,"UDINT",ar,4);av=av.concat(aw)}if(av.length>0){e=o(av)}at={method:"ReadWrite",indexGroup:l.SumRd,indexOffset:am.length,pwrData:e,reqDescr:aj};t(at).send()};this.readAdsState=function(e){var ai={method:"ReadState",reqDescr:e};t(ai).send()};this.logSymbols=function(){k(L)};this.getSymbolsAsJSON=function(){var aj;if(typeof JSON!=="object"){k("TAME library error: No JSON parser found.")}else{try{aj=JSON.stringify(L);return aj}catch(ai){k("TAME library error: Could not convert the Symbol Table to JSON:"+ai)}}};this.setSymbolsFromJSON=function(aj){if(typeof JSON!=="object"){k("TAME library error: No JSON parser found.")}else{try{L=JSON.parse(aj)}catch(ai){k("TAME library error: Could not create the Symbol Table from JSON:"+ai);return}h=true;k("TAME library info: Symbol Table successfully created from JSON data.")}};this.parseResponse=function(an){var aj,am,ai;if(typeof an.reqDescr.id==="number"){B[an.reqDescr.id]=0}if(an.xmlHttpReq.responseXML===null){k('TAME library error: Request contains no XML data. Object "responseXML" is null.');k('TAME library error: This is the "responseText":');k(an.xmlHttpReq.responseText)}try{aj=an.xmlHttpReq.responseXML.documentElement}catch(al){k("TAME library error: No XML data in server response:"+al);return}try{ai=aj.getElementsByTagName("faultstring")[0].firstChild.data;try{am=aj.getElementsByTagName("errorcode")[0].firstChild.data}catch(al){am="-"}k("TAME library error: Message from server:  "+ai+" ("+am+")");return}catch(ak){am=0}if(typeof aj.normalize==="function"){aj.normalize()}if(an.method==="ReadState"){ae(an)}else{if(an.method==="Read"||an.method==="ReadWrite"){switch(an.indexGroup){case l.UploadInfo:S(an);break;case l.Upload:Z(an);break;case l.SumRd:b(an);break;default:v(an)}}}if(typeof an.reqDescr.oc==="function"){if(typeof an.reqDescr.ocd==="number"){window.setTimeout(an.reqDescr.oc,an.reqDescr.ocd)}else{an.reqDescr.oc()}}};this.writeBool=function(e){I("Write","BOOL",e)};this.writeByte=function(e){I("Write","BYTE",e)};this.writeUsint=function(e){I("Write","USINT",e)};this.writeSint=function(e){I("Write","SINT",e)};this.writeWord=function(e){I("Write","WORD",e)};this.writeUint=function(e){I("Write","UINT",e)};this.writeInt=function(e){I("Write","INT",e)};this.writeInt1Dp=function(e){I("Write","INT1DP",e)};this.writeDword=function(e){I("Write","DWORD",e)};this.writeUdint=function(e){I("Write","UDINT",e)};this.writeDint=function(e){I("Write","DINT",e)};this.writeReal=function(e){I("Write","REAL",e)};this.writeLreal=function(e){I("Write","LREAL",e)};this.writeString=function(e){I("Write","STRING",e)};this.writeTime=function(e){I("Write","TIME",e)};this.writeTod=function(e){I("Write","TOD",e)};this.writeDate=function(e){I("Write","DATE",e)};this.writeDt=function(e){I("Write","DT",e)};this.readBool=function(e){I("Read","BOOL",e)};this.readByte=function(e){I("Read","BYTE",e)};this.readUsint=function(e){I("Read","USINT",e)};this.readSint=function(e){I("Read","SINT",e)};this.readWord=function(e){I("Read","WORD",e)};this.readUint=function(e){I("Read","UINT",e)};this.readInt=function(e){I("Read","INT",e)};this.readInt1Dp=function(e){I("Read","INT1DP",e)};this.readDword=function(e){I("Read","DWORD",e)};this.readUdint=function(e){I("Read","UDINT",e)};this.readDint=function(e){I("Read","DINT",e)};this.readReal=function(e){I("Read","REAL",e)};this.readLreal=function(e){I("Read","LREAL",e)};this.readString=function(e){I("Read","STRING",e)};this.readTime=function(e){I("Read","TIME",e)};this.readTod=function(e){I("Read","TOD",e)};this.readDate=function(e){I("Read","DATE",e)};this.readDt=function(e){I("Read","DT",e)};this.writeStruct=function(e){X("Write",e)};this.readStruct=function(e){X("Read",e)};this.writeArrayOfBool=function(e){E("Write","BOOL",e)};this.writeArrayOfByte=function(e){E("Write","BYTE",e)};this.writeArrayOfUsint=function(e){E("Write","USINT",e)};this.writeArrayOfSint=function(e){E("Write","SINT",e)};this.writeArrayOfWord=function(e){E("Write","WORD",e)};this.writeArrayOfUint=function(e){E("Write","UINT",e)};this.writeArrayOfInt=function(e){E("Write","INT",e)};this.writeArrayOfInt1Dp=function(e){E("Write","INT1DP",e)};this.writeArrayOfDword=function(e){E("Write","DWORD",e)};this.writeArrayOfUdint=function(e){E("Write","UDINT",e)};this.writeArrayOfDint=function(e){E("Write","DINT",e)};this.writeArrayOfReal=function(e){E("Write","REAL",e)};this.writeArrayOfLreal=function(e){E("Write","LREAL",e)};this.writeArrayOfString=function(e){E("Write","STRING",e)};this.writeArrayOfTime=function(e){E("Write","TIME",e)};this.writeArrayOfTod=function(e){E("Write","TOD",e)};this.writeArrayOfDate=function(e){E("Write","DATE",e)};this.writeArrayOfDt=function(e){E("Write","DT",e)};this.writeArrayOfStruct=function(e){E("Write","STRUCT",e)};this.readArrayOfBool=function(e){E("Read","BOOL",e)};this.readArrayOfByte=function(e){E("Read","BYTE",e)};this.readArrayOfUsint=function(e){E("Read","USINT",e)};this.readArrayOfSint=function(e){E("Read","SINT",e)};this.readArrayOfWord=function(e){E("Read","WORD",e)};this.readArrayOfUint=function(e){E("Read","UINT",e)};this.readArrayOfInt=function(e){E("Read","INT",e)};this.readArrayOfInt1Dp=function(e){E("Read","INT1DP",e)};this.readArrayOfDword=function(e){E("Read","DWORD",e)};this.readArrayOfUdint=function(e){E("Read","UDINT",e)};this.readArrayOfDint=function(e){E("Read","DINT",e)};this.readArrayOfReal=function(e){E("Read","REAL",e)};this.readArrayOfLreal=function(e){E("Read","LREAL",e)};this.readArrayOfString=function(e){E("Read","STRING",e)};this.readArrayOfTime=function(e){E("Read","TIME",e)};this.readArrayOfTod=function(e){E("Read","TOD",e)};this.readArrayOfDate=function(e){E("Read","DATE",e)};this.readArrayOfDt=function(e){E("Read","DT",e)};this.readArrayOfStruct=function(e){E("Read","STRUCT",e)};function W(){var e={method:"Read",sync:true,indexGroup:l.UploadInfo,indexOffset:0,reqDescr:{readLength:8}};t(e).send()}function S(an){var ai,aj,ao,al,ak;try{ai=an.xmlHttpReq.responseXML.documentElement;aj=N(ai.getElementsByTagName("ppData")[0].firstChild.data);ao=aj.substr(0,4);a=R(ao,"DWORD");ao=aj.substr(4,4);u=R(ao,"DWORD")}catch(am){k("TAME library error: Parsing of UploadInfo failed:"+am);return}ak={method:"Read",sync:true,indexGroup:l.Upload,indexOffset:0,reqDescr:{readLength:u}};t(ak).send()}function Z(aA){var ai,ar=0,ax=4,au=8,ap=12,am=30,al,an,az,aq,at,aj,ay,ao,ak,aw;try{ai=aA.xmlHttpReq.responseXML.documentElement;al=N(ai.getElementsByTagName("ppData")[0].firstChild.data);for(aq=0;aq<a;aq++){an=al.substr(ar,4);at=R(an,"DWORD");aj=al.substring(ar+am,(ar+at)).split(String.fromCharCode(0));L[aj[0]]={typeString:aj[1],indexGroup:R(al.substr(ar+ax,4),"DWORD"),indexOffset:R(al.substr(ar+au,4),"DWORD"),size:R(al.substr(ar+ap,4),"DWORD")};ay=aj[1].split(" ");if(ay[0]==="ARRAY"){L[aj[0]].type=ay[0];ao=ay[1].substring(1,ay[1].length-1);ao=ao.split("..");ao=parseInt(ao[1],10)-parseInt(ao[0],10)+1;L[aj[0]].arrayLength=ao;ak=ay[3].split("(");if(ak[1]!==undefined){ak[1]=ak[1].substr(0,ak[1].length-1);L[aj[0]].fullType=ay[0]+"."+ao+"."+ak[0]+"."+ak[1];L[aj[0]].stringLength=parseInt(ak[1],10)}else{L[aj[0]].fullType=ay[0]+"."+ao+"."+ak[0]}L[aj[0]].itemSize=L[aj[0]].size/ao;L[aj[0]].arrayDataType="USER";for(aw in y){if(y.hasOwnProperty(aw)){if(ak[0]===aw){L[aj[0]].arrayDataType=ak[0]}}}}else{ak=ay[0].split("(");if(ak[1]!==undefined){ak[1]=ak[1].substr(0,ak[1].length-1);L[aj[0]].fullType=ak[0]+"."+ak[1];L[aj[0]].stringLength=parseInt(ak[1],10)}else{L[aj[0]].fullType=ak[0]}L[aj[0]].type="USER";for(aw in y){if(y.hasOwnProperty(aw)){if(ak[0]===aw){L[aj[0]].type=ak[0]}}}}ar+=at}h=true;k("TAME library info: End of fetching the symbols.");k("TAME library info: Symbol table ready.")}catch(av){k("TAME library error: Parsing of uploaded symbol information failed:"+av);return}}if(d.dontFetchSymbols===true){k("TAME library info: Reading of the UploadInfo deactivated. Symbol Table could not be created.")}else{k("TAME library info: Start fetching the symbols from PLC.");try{W()}catch(af){k("TAME library error: Could'nt fetch the symbol information from the PLC:"+af);return}}};TAME.WebServiceClient.createClient=function(a){return new TAME.WebServiceClient(a)};