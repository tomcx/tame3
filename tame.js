/*
 * TAME [TwinCAT ADS Made Easy] V3.2 beta
 * 
 * Copyright (c) 2009-2012 Thomas Schmidt; t.schmidt.p1 at freenet.de
 * 
 * Dual licensed under:
 *  MIT - http://www.opensource.org/licenses/mit-license
 *  GPLv3 - http://www.opensource.org/licenses/GPL-3.0
 * 
 */
var TAME={weekdShortNames:{ge:["So","Mo","Di","Mi","Do","Fr","Sa"],en:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},weekdLongNames:{ge:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],en:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},monthsShortNames:{ge:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],en:["Jan","Feb","Mar","Apr","May","Jun","July","Aug","Sept","Oct","Nov","Dez"]},monthsLongNames:{ge:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],en:["January","February","March","April","May","June","July","August","September","October","November","December"]}};TAME.WebServiceClient=function(f){function m(am){try{window.console.log(am)}catch(an){alert(am)}}var Y=this,n={M:16416,MX:16417,I:61472,IX:61473,Q:61488,QX:61489,Upload:61451,UploadInfo:61452,SumRd:61568,SumWr:61569,SumRdWr:61570},A={BOOL:1,BYTE:1,USINT:1,SINT:1,WORD:2,UINT:2,INT:2,INT16:2,INT1DP:2,DWORD:4,UDINT:4,DINT:4,TIME:4,TOD:4,DATE:4,DT:4,POINTER:4,REAL:4,LREAL:8,STRING:80,EndStruct:0},S=["INVALID","IDLE","RESET","INIT","START","RUN","STOP","SAVECFG","POWERGOOD","ERROR","SHUTDOWN","SUSPEND","RESUME","CONFIG","RECONFIG"],h=(typeof f.language==="string")?f.language:"ge",o=function(){var e={},an="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",am;for(am=0;am<an.length;am++){e[am]=an.charAt(am)}return e}(),r=function(){var e={},an="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",am;for(am=0;am<an.length;am++){e[an.charAt(am)]=am}return e}(),i=f.dataAlign4,D=[0],O={},k=false,a=0,w=0,g,c,M,al;if(typeof f.serviceUrl==="string"){g=f.serviceUrl}else{m("TAME library error: Service URL is not a string!");return}if(typeof f.amsNetId==="string"){c=f.amsNetId}else{m("TAME library error: NetId is not a string!");return}if(f.amsPort===undefined){M="801"}else{if(typeof f.amsPort==="string"&&parseInt(f.amsPort,10)>=801&&parseInt(f.amsPort,10)<=804){M=f.amsPort}else{m("TAME library error: AMS Port Number ("+parseInt(f.amsPort,10)+") is no string or out of range!");return}}if(f.syncXmlHttp===true){al=true;m('TAME library info: The "syncXmlHttp" parameter was set. Synchronous XMLHttpRequests are used by default.')}else{al=false}this.dateNames={weekdShort:TAME.weekdShortNames[h],weekdLong:TAME.weekdLongNames[h],monthsShort:TAME.monthsShortNames[h],monthsLong:TAME.monthsLongNames[h]};this.maxStringLen=255;this.maxDropReq=10;this.useCheckBounds=true;this.adsState="";function z(e,ao,an,aq,au){var ap=[],at=0,ar=[],am=0;if(typeof e==="number"){ap[0]=e.toString(10)}else{if(typeof e==="string"){ap=e.split(".")}else{m("TAME library error: Can't parse name of object/variable. Name is not a string or number!");m(e);return}}if(an===undefined){an=window}at=ap.length-1;while(am<at){if(ap[am].charAt(ap[am].length-1)==="]"){ar=ap[am].substring(0,ap[am].length-1).split("[");an=an[ar[0]][ar[1]]}else{if(an[ap[am]]===undefined){an[ap[am]]=[]}an=an[ap[am]]}am++}if(ap[am].charAt(ap[am].length-1)==="]"){ar=ap[am].substring(0,ap[am].length-1).split("[");an=an[ar[0]];if(ao!==undefined){if(typeof aq==="string"){ao=aq+ao}if(typeof au==="string"){ao=ao+au}an[ar[1]]=ao}return an[ar[1]]}if(ao!==undefined){if(typeof aq==="string"){ao=aq+ao}if(typeof au==="string"){ao=ao+au}an[ap[am]]=ao}return an[ap[am]]}function aj(e){if(e===undefined){return false}if(!isNaN(e)&&e>0&&e<=Y.maxStringLen){return true}m("TAME library error: User defined string length not valid! length: "+e);m("Max. string length: "+Y.maxStringLen);return false}function y(an){var am;if(an.addr){if(typeof an.addr==="string"&&an.addr.charAt(0)==="%"){if(an.addr.charAt(2)==="X"){am=n[an.addr.substr(1,2)]}else{am=n[an.addr.substr(1,1)]}}else{m('TAME library error: Wrong address definition, should be a string and start with "%"!');m(an);return}}else{if(an.name){if(typeof an.name==="string"){try{am=O[an.name].indexGroup}catch(ao){m("TAME library error: Can't get the IndexGroup for this request!");m("TAME library error: Please check the variable name.");m(ao);m(an);return}}else{m("TAME library error: Varible name should be a string!");m(an);return}}else{m("TAME library error: Neither a name nor an address for the variable/request defined!");m(an);return}}if(isNaN(am)){m("TAME library error: IndexGroup is not a number, check address or name definition of the variable/request!");m(an)}return am}function l(an){var aq,am="",ao=[];if(an.addr){if(typeof an.addr==="string"&&an.addr.charAt(0)==="%"){if(an.addr.charAt(2)==="X"){am=an.addr.substr(3);ao=am.split(".");aq=parseInt(ao[0],10)*8+parseInt(ao[1],10)}else{aq=parseInt(an.addr.substr(3),10);if(typeof an.addrOffset==="number"){aq+=an.addrOffset}}}else{m('TAME library error: Wrong address definition, should be a string and start with "%"!');m(an);return}}else{if(an.name){if(typeof an.name==="string"){try{aq=O[an.name].indexOffset;if(typeof an.addrOffset==="number"){aq+=an.addrOffset}}catch(ap){m("TAME library error: Can't get the IndexOffset for this request!");m("TAME library error: Please check the variable name.");m(ap);m(an);return}}else{m("TAME library error: Varible name should be a string!");m(an);return}}else{m("TAME library error: Neither a name nor an address for the variable/request defined!");m(an);return}}if(isNaN(aq)){m("TAME library error: IndexOffset is not a number, check address or name definition of the variable/request.");m(an)}return aq}function X(){var an;if(window.XMLHttpRequest){an=new window.XMLHttpRequest()}else{try{an=new window.ActiveXObject("Msxml2.XMLHTTP")}catch(ao){try{an=new window.ActiveXObject("Microsoft.XMLHTTP")}catch(am){an=null;m("TAME library error: Failed Creating XMLHttpRequest-Object!")}}}return an}function v(e){if(e.reqDescr===undefined){e.reqDescr={}}else{if(e.reqDescr.debug){m(e)}}e.send=function(){var am,an;if(typeof this.reqDescr.id==="number"&&D[this.reqDescr.id]>0){m("TAME library warning: Request dropped (last request with ID "+e.reqDescr.id+" not finished!)");D[this.reqDescr.id]++;if(D[this.reqDescr.id]<=Y.maxDropReq){return}D[this.reqDescr.id]=0}if(e.sync===true){an=false}else{if(this.reqDescr.sync===true){an=false}else{if(this.reqDescr.sync===false){an=true}else{if(al===true){an=false}else{an=true}}}}this.xmlHttpReq=X();am="<?xml version='1.0' encoding='utf-8'?>";am+="<soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' ";am+="xmlns:xsd='http://www.w3.org/2001/XMLSchema' ";am+="xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>";am+="<soap:Body><q1:";am+=this.method;am+=" xmlns:q1='http://beckhoff.org/message/'><netId xsi:type='xsd:string'>";am+=c;am+="</netId><nPort xsi:type='xsd:int'>";am+=M;am+="</nPort>";if(this.indexGroup!==undefined){am+="<indexGroup xsi:type='xsd:unsignedInt'>";am+=this.indexGroup;am+="</indexGroup>"}if(this.indexOffset!==undefined){am+="<indexOffset xsi:type='xsd:unsignedInt'>";am+=this.indexOffset;am+="</indexOffset>"}if((this.method==="Read"||this.method==="ReadWrite")&&this.reqDescr.readLength>0){am+="<cbRdLen xsi:type='xsd:int'>";am+=this.reqDescr.readLength;am+="</cbRdLen>"}if(this.pData&&this.pData.length>0){am+="<pData xsi:type='xsd:base64Binary'>";am+=this.pData;am+="</pData>"}if(this.pwrData&&this.pwrData.length>0){am+="<pwrData xsi:type='xsd:base64Binary'>";am+=this.pwrData;am+="</pwrData>"}am+="</q1:";am+=this.method;am+="></soap:Body></soap:Envelope>";if(typeof this.xmlHttpReq==="object"){this.xmlHttpReq.open("POST",g,an);this.xmlHttpReq.setRequestHeader("SOAPAction","http://beckhoff.org/action/TcAdsSync."+this.method);this.xmlHttpReq.setRequestHeader("Content-Type","text/xml; charset=utf-8");if(an===true){this.xmlHttpReq.onreadystatechange=function(){if((e.xmlHttpReq.readyState===4)&&(e.xmlHttpReq.status===200)){Y.parseResponse(e)}};this.xmlHttpReq.send(am)}else{this.xmlHttpReq.send(am);Y.parseResponse(e)}if(typeof this.reqDescr.id==="number"){D[this.reqDescr.id]=1}}};return e}function T(ao,an,am,e){var ap;if(typeof ao.val==="string"){if(an==="REAL"||an==="LREAL"){ap=parseFloat(ao.val)}else{ap=parseInt(ao.val,10)}}else{if(typeof ao.val==="number"){ap=ao.val}else{m("TAME library error: Wrong variable type for a numeric variable in write request!");m("TAME library error: Variable type should be number or string, but is "+typeof ao.val);m(ao);ap=0}}if(isNaN(ap)){ap=0;m("TAME library error: Value of a numeric variable in write request is not a number.");m(ao)}if(Y.useCheckBounds===true){if(an==="LREAL"){if(!isFinite(ap)){m("TAME library warning: Limit for LREAL value exceeded!");m("Upper limit: "+Number.MAX_VALUE);m("Lower limit: "+Number.MIN_VALUE);m("value: "+ap);m(ao)}}else{if(an==="REAL"){if(ap>0){if(ap<1.175495e-38){m("TAME library warning: Lower limit for positive REAL value exceeded!");m("limit: 1.175495e-38");m("value: "+ap);m(ao);ap=1.175495e-38}else{if(ap>3.402823e+38){m("TAME library warning: Upper limit for positive REAL value exceeded!");m("limit: 3.402823e+38");m("value: "+ap);m(ao);ap=3.402823e+38}}}else{if(ap<0){if(ap>-1.175495e-38){m("TAME library warning: Upper limit for negative REAL value exceeded!");m("limit: -1.175495e-38");m("value: "+ap);m(ao);ap=-1.175495e-38}else{if(ap<-3.402823e+38){m("TAME library warning: Lower limit for negative REAL value exceeded!");m("limit: -3.402823e+38");m("value: "+ap);m(ao);ap=-3.402823e+38}}}}}else{if(ap<am){m("TAME library warning: Lower limit for numeric value exceeded!");m("type: "+an);m("limit: "+am);m("value: "+ap);m(ao);ap=am}else{if(ap>e){m("TAME library warning: Upper limit for numeric value exceeded!");m("type: "+an);m("limit: "+e);m("value: "+ap);m(ao);ap=e}}}}}return ap}function ag(an){var am=[];if(typeof an.type==="string"){am=an.type.split(".");if(am.length>2){am[1]=am.slice(1).join(".")}}else{if(k&&typeof an.name==="string"){try{am[0]=O[an.name].type;if(am[0]==="STRING"){am[1]=O[an.name].stringLength}else{if(typeof an.format==="string"){am[1]=an.format}else{if(typeof an.decPlaces==="number"){am[1]=an.decPlaces}else{if(typeof an.dp==="number"){am[1]=an.dp}}}}}catch(ao){m("TAME library error: A problem occured while reading a data type from the symbol table!");m(ao);m(an)}}else{m("TAME library error: Could not get the type of the item!");m(an)}}return am}function I(e){if((e>=97)&&(e<=102)){return(e-87)}if((e>=65)&&(e<=70)){return(e-55)}if((e>=48)&&(e<=57)){return(e-48)}return 0}function ae(ap,am){var e=[],ao=ap.toString(16),an;while(ao.length<am*2){ao="0"+ao}for(an=0;an<am;an++){e[(am-1)-an]=((I(ao.charCodeAt(an*2))*16)+I(ao.charCodeAt((an*2)+1)))}return e}function t(am){var ap=0,at=0,aq,e,ao,ar,an;e=Math.abs(am);if(am!==0){for(an=128;an>-127;an--){ao=e/Math.pow(2,an);if(ao>=2){break}ar=an;aq=ao}ar+=127;aq=aq.toString(2);for(an=2;an<25;an++){ap<<=1;if(aq.charAt(an)==="1"){ap+=1}}if(aq.charAt(25)==="1"){ap+=1}at=ar;at<<=23;at+=ap;if(am<0){at+=2147483648}}return at}function C(ar){var an=0,au=0,ao={part1:0,part2:0},av,aq,am,e,at,ap;av=Math.abs(ar);if(ar!==0){for(ap=1024;ap>=-1023;ap--){aq=av/Math.pow(2,ap);if(aq>=2){break}am=ap;at=aq}am+=1023;at=at.toString(2);for(ap=2;ap<22;ap++){an<<=1;if(at.charAt(ap)==="1"){an+=1}}if(at.charAt(ap)==="1"){e=true}ap++;for(ap;ap<54;ap++){au<<=1;if(at.charAt(ap)==="1"){au+=1}}ao.part1=am;ao.part1<<=20;ao.part1+=an;if(ar<0){ao.part1+=2147483648}ao.part2=au;if(e===true){ao.part2+=2147483648}}return ao}function J(an,am){var e;switch(am){case"#d":case"#dd":e=an*86400000;break;case"#h":case"#hh":e=an*3600000;break;case"#m":case"#mm":e=an*60000;break;case"#s":case"#ss":e=an*1000;break;case"#ms":case"#msmsms":e=an;break;default:e=an;break}return e}function B(at,av){var e=av.split("#"),ar=e.length,au=/:|\.|-|_/,an=0,am=0,ap,ao,aq,aw;for(ao=1;ao<ar;ao++){if(au.test(e[ao])===true){aw=true}}if(aw!==true){m("TAME library error: No separator ( : . - _ ) for TOD string found!");m("String: "+at);m("Format: "+av);return 0}aq=at.split(au);for(ao=1;ao<ar;ao++){switch(e[ao]){case"h":case"hh":ap=parseInt(aq[am],10)*3600000;am++;break;case"m":case"mm":ap=parseInt(aq[am],10)*60000;am++;break;case"s":case"ss":ap=parseInt(aq[am],10)*1000;am++;break;case"ms":case"msmsms":ap=parseInt(aq[am],10);am++;break;default:ap=0}an+=ap}return an}function q(ar){var aq=o,ao=0,am="",ap,an,e;while(ao<ar.length){ap=ar[ao++];an=ar[ao++];e=ar[ao++];am=am+aq[ap>>2]+aq[((ap&3)<<4)|(an>>4)]+(isNaN(an)?"=":aq[(((an&15)<<2)|(e>>6))])+((isNaN(an)||isNaN(e))?"=":aq[e&63])}return am}function d(ar,ap,aq,ao){var au=[],e,at,am,an;if(ar.val===undefined){switch(ap){case"STRING":ar.val="";break;case"DATE":case"DT":case"TOD":ar.val=new Date();break;default:ar.val=0;break}m("TAME library warning: Value of a variable in write request is not defined!");m(ar)}switch(ap){case"BOOL":if(ar.val){au[0]=1}else{au[0]=0}break;case"BYTE":case"USINT":e=T(ar,ap,0,255);au=ae(e,ao);break;case"SINT":e=T(ar,ap,-128,127);if(e<0){e=e+256}au=ae(e,ao);break;case"WORD":case"UINT":e=T(ar,ap,0,65535);au=ae(e,ao);break;case"INT":case"INT16":e=T(ar,ap,-32768,32767);if(e<0){e=e+65536}au=ae(e,ao);break;case"INT1DP":ar.val=Math.round(ar.val*10);e=T(ar,ap,-32768,32767);if(e<0){e=e+65536}au=ae(e,ao);break;case"DWORD":case"UDINT":e=T(ar,ap,0,4294967295);au=ae(e,ao);break;case"DINT":e=T(ar,ap,-2147483648,2147483647);if(e<0){e=e+4294967296}au=ae(e,ao);break;case"REAL":e=T(ar,ap);e=t(e);au=ae(e,ao);break;case"LREAL":e=T(ar,ap);e=C(e);au=ae(e.part2,ao);au=au.concat(ae(e.part1,ao));break;case"DATE":if(typeof ar.val==="object"){ar.val.setHours(0);ar.val.setMinutes(0);ar.val.setSeconds(0);e=ar.val.getTime()/1000-ar.val.getTimezoneOffset()*60}else{m("TAME library error: Date is not an object!");m(ar)}au=ae(e,ao);break;case"DT":if(typeof ar.val==="object"){e=ar.val.getTime()/1000-ar.val.getTimezoneOffset()*60}else{m("TAME library error: Date is not an object!");m(ar)}au=ae(e,ao);break;case"TOD":if(typeof ar.val==="object"){ar.val.setYear(1970);ar.val.setMonth(0);ar.val.setDate(1);e=ar.val.getTime()-ar.val.getTimezoneOffset()*60000}else{if(typeof ar.val==="string"){if(aq===""||aq===undefined){aq="#hh#:#mm";m("TAME library warning: No format given for TOD string! Using default #hh#:#mm.");m(ar)}e=B(ar.val,aq)}else{m("TAME library error: Time of day is wether a date object nor a string!");m(ar)}}au=ae(e,ao);break;case"STRING":at=(aq===undefined)?A.STRING:parseInt(aq,10);if(aj(at)){am=at<ar.val.length?at:ar.val.length;for(an=0;an<am;an++){au[an]=ar.val.charCodeAt(an)}for(an;an<at;an++){au[an]=0}au[an]=0}break;case"TIME":e=parseInt(ar.val,10);e=J(e,aq);if(e<0){e=0;m("TAME library warning: Lower limit for TIME variable exceeded!)");m("value: "+ar.val+aq);m(ar)}else{if(e>4294967295){e=4294967295;m("TAME library warning: Upper limit for TIME variable exceeded!)");m("value: "+ar.val+aq);m(ar)}}au=ae(e,ao);break;case"EndStruct":break;default:m("TAME library error: Unknown data type in write request : "+ap);break}return au}function u(am){var e=am.toString(16);if((e.length%2)!==0){e="0"+e}return e}function j(am,e){e=(isNaN(e))?0:e;var an=am.toString(10);while(an.length<e){an="0"+an}return an}function ak(ar,aq){var e=aq.split("#"),ap=e.length,am="",ao,an;for(an=1;an<ap;an++){switch(e[an]){case"D":ao=ar.getDate();break;case"DD":ao=ar.getDate();ao=j(ao,2);break;case"WD":ao=ar.getDay();break;case"WKD":ao=Y.dateNames.weekdShort[ar.getDay()];break;case"WEEKDAY":ao=Y.dateNames.weekdLong[ar.getDay()];break;case"M":ao=ar.getMonth()+1;break;case"MM":ao=ar.getMonth()+1;ao=j(ao,2);break;case"MON":ao=Y.dateNames.monthsShort[ar.getMonth()];break;case"MONTH":ao=Y.dateNames.monthsLong[ar.getMonth()];break;case"YY":ao=ar.getYear();while(ao>100){ao-=100}break;case"YYYY":ao=ar.getFullYear();break;case"h":ao=ar.getHours();break;case"hh":ao=ar.getHours();ao=j(ao,2);break;case"m":ao=ar.getMinutes();break;case"mm":ao=ar.getMinutes();ao=j(ao,2);break;case"s":ao=ar.getSeconds();break;case"ss":ao=ar.getSeconds();ao=j(ao,2);break;case"ms":ao=ar.getMilliseconds();break;case"msmsms":ao=ar.getMilliseconds();ao=j(ao,3);break;default:ao=e[an];break}am=am+ao}return am}function H(ar,aq){var e=aq.split("#"),ap=e.length,am="",ao,an;for(an=1;an<ap;an++){switch(e[an]){case"d":if(ap<=2){ao=ar/86400000}else{ao=Math.floor(ar/86400000);ar=ar%86400000}break;case"dd":if(ap<=2){ao=ar/86400000}else{ao=Math.floor(ar/86400000);ar=ar%86400000}ao=j(ao,2);break;case"h":if(ap<=2){ao=ar/3600000}else{ao=Math.floor(ar/3600000);ar=ar%3600000}break;case"hh":if(ap<=2){ao=ar/3600000}else{ao=Math.floor(ar/3600000);ar=ar%3600000}ao=j(ao,2);break;case"m":if(ap<=2){ao=ar/60000}else{ao=Math.floor(ar/60000);ar=ar%60000}break;case"mm":if(ap<=2){ao=ar/60000}else{ao=Math.floor(ar/60000);ar=ar%60000}ao=j(ao,2);break;case"s":if(ap<=2){ao=ar/1000}else{ao=Math.floor(ar/1000);ar=ar%1000}break;case"ss":if(ap<=2){ao=ar/1000}else{ao=Math.floor(ar/1000);ar=ar%1000}ao=j(ao,2);break;case"ms":ao=ar;break;case"msmsms":ao=ar;ao=j(ao,3);break;default:ao=e[an];break}am=am+ao}return am}function R(am){var e=u(am.charCodeAt(0));return parseInt(e,16)}function af(e){var am=R(e);if(am>127){am=am-256}return am}function N(am){var e=u(am.charCodeAt(1));e+=u(am.charCodeAt(0));return parseInt(e,16)}function L(e){var am=N(e);if(am>32767){am=am-65536}return am}function F(am){var e=u(am.charCodeAt(3));e+=u(am.charCodeAt(2));e+=u(am.charCodeAt(1));e+=u(am.charCodeAt(0));return parseInt(e,16)}function P(e){var am=F(e);if(am>2147483647){am=am-4294967296}return am}function W(e,an){var am=F(e);if(an===undefined){return am}return(H(am,an))}function p(e,an){var am=new Date(F(e));am=new Date(am.getTime()+am.getTimezoneOffset()*60000);if(an===undefined){return am}return(ak(am,an))}function ad(am,an){var e=new Date(F(am)*1000);e=new Date(e.getTime()+e.getTimezoneOffset()*60000);if(an===undefined){return e}return(ak(e,an))}function s(an){var ap=1,ar=0.5,am=F(an),e,aq,ao;if(am===0){return 0}e=((am>>>31)===1)?"-":"+";am<<=1;aq=(am>>>24)-127;am<<=8;for(ao=1;ao<=23;ao++){ap+=am<0?ar:0;am<<=1;ar/=2}return parseFloat(e+(ap*Math.pow(2,aq)))}function E(an){var am=F(an.substring(4,8)),aq=F(an.substring(0,4)),ap=12,ao=1,at=0.5,e,ar;if(am===0&&aq===0){return 0}e=((am>>>31)===1)?"-":"+";am<<=1;ar=(am>>>21)-1023;am<<=11;while(ap<32){ao+=am<0?at:0;am<<=1;at/=2;ap++}if((aq>>>31)===1){ao+=at;aq<<=1;at/=2}while(ap<64){ao+=aq<0?at:0;aq<<=1;at/=2;ap++}return parseFloat(e+(ao*Math.pow(2,ar)))}function ab(e){return e.split(String.fromCharCode(0))[0]}function Q(ao){var ap=r,ar=0,e="",aq,an,am,aw,av,au,at;ao=ao.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{aw=ap[ao.charAt(ar++)];av=ap[ao.charAt(ar++)];au=ap[ao.charAt(ar++)];at=ap[ao.charAt(ar++)];aq=(aw<<2)|(av>>4);an=((av&15)<<4)|(au>>2);am=((au&3)<<6)|at;e+=String.fromCharCode(aq);if(au!==64){e+=String.fromCharCode(an)}if(at!==64){e+=String.fromCharCode(am)}}while(ar<ao.length);return e}function U(am,e,ao){var an;switch(e){case"BOOL":an=(am.charCodeAt(0)!="0");break;case"BYTE":case"USINT":an=R(am);break;case"SINT":an=af(am);break;case"WORD":case"UINT":an=N(am);break;case"INT":case"INT16":an=L(am);break;case"INT1DP":an=((L(am))/10).toFixed(1);break;case"DWORD":case"UDINT":an=F(am);break;case"DINT":an=P(am);break;case"REAL":an=s(am);if(ao!==undefined){an=an.toFixed(parseInt(ao,10))}break;case"LREAL":an=E(am);if(ao!==undefined){an=an.toFixed(parseInt(ao,10))}break;case"STRING":an=ab(am);break;case"TOD":an=p(am,ao);break;case"TIME":an=W(am,ao);break;case"DT":case"DATE":an=ad(am,ao);break;case"EndStruct":break;default:m("TAME library error: Unknown data type at parsing read request: "+e);break}return an}function x(aF){var am=aF.xmlHttpReq.responseXML.documentElement,ax=aF.reqDescr.items,av=[],ay=0,aC,ao,ap,aE,at,aA,au,aD,an,az,aw,aq,ar;try{ao=Q(am.getElementsByTagName("ppData")[0].firstChild.data);for(aw=0,aq=ax.length;aw<aq;aw++){aC=ax[aw];av=ag(aC);an=av[0];az=av[1];aA=A[an];switch(an){case"STRING":if(az!==undefined){at=parseInt(az,10)}aA=(aj(at)?at:aA)+1;break;case"EndStruct":aA=aC.val;break}au=aA<4?aA:4;if(aF.reqDescr.seq!==true){ar=l(aF.reqDescr);ay=aC.addr-ar}else{if(aF.reqDescr.dataAlign4===true&&au>1&&an!=="STRING"&&ay>0){aD=ay%au;if(aD>0){ay+=au-aD}}}ap=ao.substr(ay,aA);aE=U(ap,an,az);if(an!=="EndStruct"){z(aC.jvar,aE,aF.reqDescr.dataObj,aC.prefix,aC.suffix)}if(aF.reqDescr.seq===true){ay+=aA}}}catch(aB){m("TAME library error: Parsing of Read Request failed:"+aB);m(aC);return}}function b(aM){var am=aM.xmlHttpReq.responseXML.documentElement,az=aM.reqDescr.items,ax=[],aD=0,ao=0,aB=window,aJ,aq,ar,aL,aF,ap,aE,ay,av,at,aA,aC,aw,aI,au;function aH(){var aN,e;if(i===true&&ap!=="STRING"){aN=aF<4?aF:4;if(aN>1&&ao>0){e=ao%aN;if(e>0){ao+=aN-e}}if(aN>aI){aI=aN}}}function an(){var aN,e;if(ap==="STRING"){if(aE!==undefined){aN=parseInt(aE,10)}else{if(typeof O[aJ.name].stringLength==="number"){aN=O[aJ.name].stringLength}}aF=(aj(aN)?aN:aF)+1}e=ar.substr(ao,aF);aL=U(e,ap,aE);z(aA,aL,aB,aJ.prefix,aJ.suffix);ao+=aF}function aK(){var aN,e,aR,aQ,aO,aP;for(aP in aJ.def){if(aJ.def.hasOwnProperty(aP)){e=aJ.def[aP].split(".");if(e[0]==="ARRAY"){aR=parseInt(e[1],10);aQ=e.length-1;for(aN=0;aN<aR;aN++){ap=e[2];if(e[aQ]==="SP"){aA=aP+aN;if(aQ>=4){aE=e.slice(3,-1).join(".")}}else{aA=aP+"."+aN;if(aQ>=3){aE=e.slice(3).join(".")}}if(aC!==undefined){aA=aC+"."+aA}aF=A[ap];aH();an()}}else{if(aC!==undefined){aA=aC+"."+aP}else{aA=aP}ap=e[0];aE=e.slice(1).join(".");aF=A[ap];aH();an()}}}if(i===true&&aI>1&&ap!=="STRING"){if(aI>4){aI=4}aO=ao%aI;if(aO>0){ao+=aI-aO}}}try{aq=Q(am.getElementsByTagName("ppRdData")[0].firstChild.data);for(ay=0,av=az.length;ay<av;ay++){ar=aq.substr(aD,4);at=U(ar,"DWORD");if(at!==0){m("TAME library error: ADS sub command error while processing a SumReadRequest!");m("Error code: "+at);m(az[ay])}aD+=4}for(ay=0;ay<av;ay++){aJ=az[ay];ax=ag(aJ);ap=ax[0];aE=ax[1];au=O[aJ.name].size;ar=aq.substr(aD,au);switch(ap){case"ARRAY":aB=z(aJ.jvar);ao=0;aw=O[aJ.name].arrayLength;if(O[aJ.name].arrayDataType==="USER"){for(aC=0;aC<aw;aC++){aK()}}else{ap=O[aJ.name].arrayDataType;aF=A[ap];for(aC=0;aC<aw;aC++){aA=aC;an()}}break;case"USER":aB=z(aJ.jvar);ao=0;aK();break;default:aB=window;aL=U(ar,ap,aE);z(aJ.jvar,aL,aB,aJ.prefix,aJ.suffix)}aD+=au}}catch(aG){m("TAME library error: Parsing of SumReadRequest failed:"+aG);m(aJ);return}}function ah(ao){var am=ao.xmlHttpReq.responseXML.documentElement;try{Y.adsState=parseInt(am.getElementsByTagName("pAdsState")[0].firstChild.data,10);Y.adsStateTxt=S[Y.adsState];Y.deviceState=parseInt(am.getElementsByTagName("pDeviceState")[0].firstChild.data,10)}catch(an){m("TAME library error: Parsing of ADS Read State Request failed:"+an);return}}function K(at,aq,ao){var an={},ap,am;am=A[aq];if(typeof ao.name==="string"){ao.name=ao.name.toUpperCase()}switch(aq){case"STRING":if(aj(ao.strlen)){aq+="."+ao.strlen;am=ao.strlen}else{if(k===true){try{am=O[ao.name].stringLength;aq+="."+am}catch(ar){m("TAME library error: A problem occured while reading the string length from the symbol table!");m(ar)}}}am++;break;case"TIME":case"TOD":case"DT":case"DATE":if(typeof ao.format==="string"){aq+="."+ao.format}break;case"REAL":case"LREAL":if(typeof ao.decPlaces==="number"){aq+="."+ao.decPlaces}else{if(typeof ao.dp==="number"){aq+="."+ao.dp}}break}an={addr:ao.addr,name:ao.name,id:ao.id,oc:ao.oc,ocd:ao.ocd,readLength:am,debug:ao.debug,sync:ao.sync,seq:true,items:[{val:ao.val,jvar:ao.jvar,type:aq,prefix:ao.prefix,suffix:ao.suffix}]};if(at==="Write"){Y.writeReq(an)}else{Y.readReq(an)}}function G(ap,aq,ao){var ar={},aD={},ay,an,aF=0,aG=0,aE=0,aH,am=[],aK,au,ax=0,az,av,aJ=0,aA=0,aM,aw,aL,aB;if(typeof ao.name==="string"){ao.name=ao.name.toUpperCase()}if(ap==="Write"&&typeof ao.val==="object"){aD=ao.val}else{if(typeof ao.jvar==="string"){aD=z(ao.jvar)}else{m("TAME library error: No data object for this "+ap+"-Request defined!")}}if(typeof ao.arrlen==="number"){ay=ao.arrlen}else{if(k===true){try{ay=O[ao.name].arrayLength}catch(aI){m("TAME library error: A proble occured while reading the array length from the symbol table!");m(aI)}}else{m("TAME library error: Can't get the array length for this request!")}}if(typeof ao.item==="number"&&!isNaN(ao.item)&&ap==="Write"){aL=true;if(ao.item<0||ao.item>ay-1){m('TAME library error: Wrong value for "item"!');m("item: "+ao.item);m("Last array index: "+(ay-1))}}function at(){var e;if(typeof ao.def==="string"){ao.def=z(ao.def)}else{if(typeof ao.def!=="object"){m("TAME library error: No structure definition found!")}}for(e in ao.def){if(ao.def.hasOwnProperty(e)){am=ao.def[e].split(".");if(am[0]==="ARRAY"){aK=parseInt(am[1],10);am.shift();am.shift()}else{aK=1}for(aG=0;aG<aK;aG++){if(am[0]==="STRING"){if(typeof am[1]==="string"){az=parseInt(am[1],10)}av=(aj(az)?az:A[am[0]])+1}else{av=A[am[0]]}if(i===true&&av>1&&am[0]!=="STRING"&&ax>0){aM=ax%av;if(aM>0){ax+=av-aM}}ax+=av}if(i===true&&av>aJ&&am[0]!=="STRING"){aJ=av}}}if(i===true&&aJ>1&&am[0]!=="STRING"){if(aJ>4){aJ=4}aM=ax%aJ;if(aM>0){aA=aJ-aM;ax+=aA}}if(aL){an=ax*ao.item;ay=1}ar={addr:ao.addr,name:ao.name,addrOffset:an,id:ao.id,oc:ao.oc,ocd:ao.ocd,debug:ao.debug,readLength:ax*ay,seq:true,dataAlign4:i,dataObj:aD,sync:ao.sync,items:[]};for(aG=0;aG<ay;aG++){for(e in ao.def){if(ao.def.hasOwnProperty(e)){am=ao.def[e].split(".");if(am[0]==="ARRAY"){aK=parseInt(am[1],10);au=am.length-1;for(aE=0;aE<aK;aE++){if(am[au]==="SP"){ar.items[aF]={jvar:aG+"."+e+aE};if(au===4){ar.items[aF].type=am[2]+"."+am[3]}else{ar.items[aF].type=am[2]}}else{ar.items[aF]={jvar:aG+"."+e+"."+aE};if(au===3){ar.items[aF].type=am[2]+"."+am[3]}else{ar.items[aF].type=am[2]}}if(ap==="Write"){if(aL){if(am[au]==="SP"){ar.items[aF].val=aD[ao.item][e+aE]}else{ar.items[aF].val=aD[ao.item][e][aE]}}else{if(am[au]==="SP"){ar.items[aF].val=aD[aG][e+aE]}else{ar.items[aF].val=aD[aG][e][aE]}}}aF++}}else{ar.items[aF]={jvar:aG+"."+e,type:ao.def[e]};if(ap==="Write"){if(aL){ar.items[aF].val=aD[ao.item][e]}else{ar.items[aF].val=aD[aG][e]}}aF++}}}if(i===true){ar.items[aF]={type:"EndStruct",val:aA};aF++}}}function aC(){aH=A[aq];switch(aq){case"STRING":if(aj(ao.strlen)){aq+="."+ao.strlen;aH=ao.strlen}else{if(k===true){aH=O[ao.name].stringLength;aq+="."+aH}}aH++;break;case"TIME":case"TOD":case"DT":case"DATE":if(typeof ao.format==="string"){aq+="."+ao.format}break;case"REAL":case"LREAL":if(typeof ao.decPlaces==="number"){aq+="."+ao.decPlaces}else{if(typeof ao.dp==="number"){aq+="."+ao.dp}}break}if(aL){an=ao.item*aH;ay=1}ar={addr:ao.addr,name:ao.name,addrOffset:an,id:ao.id,oc:ao.oc,ocd:ao.ocd,readLength:aH*ay,debug:ao.debug,seq:true,dataObj:aD,items:[]};for(aG=0;aG<ay;aG++){ar.items[aG]={jvar:aG,type:aq};if(ap==="Write"){if(aL){ar.items[aG].val=aD[ao.item]}else{ar.items[aG].val=aD[aG]}}}}if(aq==="STRUCT"){at()}else{aC()}if(ap==="Write"){Y.writeReq(ar)}else{Y.readReq(ar)}}function aa(e,au){var aq={},am={},av=[],ao=0,at,an,ap,ar;if(typeof au.name==="string"){au.name=au.name.toUpperCase()}if(e==="Write"&&typeof au.val==="object"){am=au.val}else{if(typeof au.jvar==="string"){am=z(au.jvar)}else{m("TAME library error: No data object for this "+e+"-Request defined!")}}if(typeof au.def==="string"){au.def=z(au.def)}else{if(typeof au.def!=="object"){m("TAME library error: No structure defininition found!")}}aq={addr:au.addr,name:au.name,id:au.id,oc:au.oc,ocd:au.ocd,debug:au.debug,seq:true,dataAlign4:i,dataObj:am,sync:au.sync,items:[]};for(ap in au.def){if(au.def.hasOwnProperty(ap)){av=au.def[ap].split(".");if(av[0]==="ARRAY"){an=parseInt(av[1],10);at=av.length-1;for(ar=0;ar<an;ar++){if(av[at]==="SP"){aq.items[ao]={jvar:ap+ar};if(at===4){aq.items[ao].type=av[2]+"."+av[3]}else{aq.items[ao].type=av[2]}}else{aq.items[ao]={jvar:ap+"."+ar};if(at===3){aq.items[ao].type=av[2]+"."+av[3]}else{aq.items[ao].type=av[2]}}if(e==="Write"){if(av[at]==="SP"){aq.items[ao].val=am[ap+ar]}else{aq.items[ao].val=am[ap][ar]}}ao++}}else{aq.items[ao]={jvar:ap,type:au.def[ap]};if(e==="Write"){aq.items[ao].val=am[ap]}ao++}}}if(e==="Write"){Y.writeReq(aq)}else{Y.readReq(aq)}}this.writeReq=function(ao){var aq=ao.items,ay={},e=[],au=[],aB=[],at,ax,an,ar,am,az,av,aA,ap,aw;if(typeof ao.name==="string"){ao.name=ao.name.toUpperCase()}for(aw=0,an=aq.length;aw<an;aw++){aA=aq[aw];au=ag(aA);at=au[0];ax=au[1];ar=(A[at]<4)?A[at]:4;if(ao.dataAlign4===true&&ar>1&&at!=="STRING"&&e.length>0){av=e.length%ar;if(av>0){az=ar-av;for(ap=1;ap<=az;ap++){e.push(0)}}}if(at==="EndStruct"){for(ap=1;ap<=aA.val;ap++){e.push(0)}}else{aB=d(aA,at,ax,ar);e=e.concat(aB)}}if(e&&e.length>0){e=q(e)}ay={method:"Write",indexGroup:y(ao),indexOffset:l(ao),pData:e,reqDescr:ao};v(ay).send()};this.readReq=function(an){var aw={},ao=an.items,aq=[],ax,av,ap,e,ar,at,ay,au,am;if(typeof an.name==="string"){an.name=an.name.toUpperCase()}if(typeof an.readLength!=="number"){an.readLength=0;for(au=0,e=ao.length;au<e;au++){ax=ao[au];aq=ag(ax);ap=aq[0];av=aq[1];if(ap==="STRING"){if(typeof av==="string"){ay=parseInt(av,10)}at=(aj(ay)?ay:A[ap])+1}else{at=A[ap]}if(an.seq===true){if(an.dataAlign4===true&&at>1&&ap!=="STRING"&&an.readLength>0){ar=an.readLength%at;if(ar>0){an.readLength+=at-ar}}an.readLength+=at}else{am=l(an);an.readLength=at+ax.addr-am}}}aw={method:"Read",indexGroup:y(an),indexOffset:l(an),reqDescr:an};v(aw).send()};this.sumReadReq=function(an){var ax={},aq=an.items,au=[],az=[],aA=[],ap=0,am=aq.length,ao={},at,aw,ay,av,ar,e;an.readLength=am*4;for(av=0;av<am;av++){ay=aq[av];if(typeof ay.name==="string"){ay.name=ay.name.toUpperCase()}au=ag(ay);at=au[0];aw=au[1];ar=O[ay.name].size;an.readLength+=ar;ao.val=y(ay);aA=d(ao,"UDINT",aw,4);az=az.concat(aA);ao.val=l(ay);aA=d(ao,"UDINT",aw,4);az=az.concat(aA);ao.val=ar;aA=d(ao,"UDINT",aw,4);az=az.concat(aA)}if(az.length>0){e=q(az)}ax={method:"ReadWrite",indexGroup:n.SumRd,indexOffset:aq.length,pwrData:e,reqDescr:an};v(ax).send()};this.readAdsState=function(e){var am={method:"ReadState",reqDescr:e};v(am).send()};this.logSymbols=function(){m(O)};this.getSymbolsAsJSON=function(){var an;if(typeof JSON!=="object"){m("TAME library error: No JSON parser found.")}else{try{an=JSON.stringify(O);return an}catch(am){m("TAME library error: Could not convert the Symbol Table to JSON:"+am)}}};this.setSymbolsFromJSON=function(an){if(typeof JSON!=="object"){m("TAME library error: No JSON parser found.")}else{try{O=JSON.parse(an)}catch(am){m("TAME library error: Could not create the Symbol Table from JSON:"+am);return}k=true;m("TAME library info: Symbol Table successfully created from JSON data.")}};this.parseResponse=function(ar){var an=ar.xmlHttpReq.responseXML.documentElement,aq,am;if(typeof ar.reqDescr.id==="number"){D[ar.reqDescr.id]=0}try{am=an.getElementsByTagName("faultstring")[0].firstChild.data;try{aq=an.getElementsByTagName("errorcode")[0].firstChild.data}catch(ap){aq="-"}m("TAME library error: Message from server:  "+am+" ("+aq+")");return}catch(ao){aq=0}if(typeof an.normalize==="function"){an.normalize()}if(ar.method==="ReadState"){ah(ar)}else{if(ar.method==="Read"||ar.method==="ReadWrite"){switch(ar.indexGroup){case n.UploadInfo:V(ar);break;case n.Upload:ac(ar);break;case n.SumRd:b(ar);break;default:x(ar)}}}if(typeof ar.reqDescr.oc==="function"){if(typeof ar.reqDescr.ocd==="number"){window.setTimeout(ar.reqDescr.oc,ar.reqDescr.ocd)}else{ar.reqDescr.oc()}}};this.writeBool=function(e){K("Write","BOOL",e)};this.writeByte=function(e){K("Write","BYTE",e)};this.writeUsint=function(e){K("Write","USINT",e)};this.writeSint=function(e){K("Write","SINT",e)};this.writeWord=function(e){K("Write","WORD",e)};this.writeUint=function(e){K("Write","UINT",e)};this.writeInt=function(e){K("Write","INT",e)};this.writeInt1Dp=function(e){K("Write","INT1DP",e)};this.writeDword=function(e){K("Write","DWORD",e)};this.writeUdint=function(e){K("Write","UDINT",e)};this.writeDint=function(e){K("Write","DINT",e)};this.writeReal=function(e){K("Write","REAL",e)};this.writeLreal=function(e){K("Write","LREAL",e)};this.writeString=function(e){K("Write","STRING",e)};this.writeTime=function(e){K("Write","TIME",e)};this.writeTod=function(e){K("Write","TOD",e)};this.writeDate=function(e){K("Write","DATE",e)};this.writeDt=function(e){K("Write","DT",e)};this.readBool=function(e){K("Read","BOOL",e)};this.readByte=function(e){K("Read","BYTE",e)};this.readUsint=function(e){K("Read","USINT",e)};this.readSint=function(e){K("Read","SINT",e)};this.readWord=function(e){K("Read","WORD",e)};this.readUint=function(e){K("Read","UINT",e)};this.readInt=function(e){K("Read","INT",e)};this.readInt1Dp=function(e){K("Read","INT1DP",e)};this.readDword=function(e){K("Read","DWORD",e)};this.readUdint=function(e){K("Read","UDINT",e)};this.readDint=function(e){K("Read","DINT",e)};this.readReal=function(e){K("Read","REAL",e)};this.readLreal=function(e){K("Read","LREAL",e)};this.readString=function(e){K("Read","STRING",e)};this.readTime=function(e){K("Read","TIME",e)};this.readTod=function(e){K("Read","TOD",e)};this.readDate=function(e){K("Read","DATE",e)};this.readDt=function(e){K("Read","DT",e)};this.writeStruct=function(e){aa("Write",e)};this.readStruct=function(e){aa("Read",e)};this.writeArrayOfBool=function(e){G("Write","BOOL",e)};this.writeArrayOfByte=function(e){G("Write","BYTE",e)};this.writeArrayOfUsint=function(e){G("Write","USINT",e)};this.writeArrayOfSint=function(e){G("Write","SINT",e)};this.writeArrayOfWord=function(e){G("Write","WORD",e)};this.writeArrayOfUint=function(e){G("Write","UINT",e)};this.writeArrayOfInt=function(e){G("Write","INT",e)};this.writeArrayOfInt1Dp=function(e){G("Write","INT1DP",e)};this.writeArrayOfDword=function(e){G("Write","DWORD",e)};this.writeArrayOfUdint=function(e){G("Write","UDINT",e)};this.writeArrayOfDint=function(e){G("Write","DINT",e)};this.writeArrayOfReal=function(e){G("Write","REAL",e)};this.writeArrayOfLreal=function(e){G("Write","LREAL",e)};this.writeArrayOfString=function(e){G("Write","STRING",e)};this.writeArrayOfTime=function(e){G("Write","TIME",e)};this.writeArrayOfTod=function(e){G("Write","TOD",e)};this.writeArrayOfDate=function(e){G("Write","DATE",e)};this.writeArrayOfDt=function(e){G("Write","DT",e)};this.writeArrayOfStruct=function(e){G("Write","STRUCT",e)};this.readArrayOfBool=function(e){G("Read","BOOL",e)};this.readArrayOfByte=function(e){G("Read","BYTE",e)};this.readArrayOfUsint=function(e){G("Read","USINT",e)};this.readArrayOfSint=function(e){G("Read","SINT",e)};this.readArrayOfWord=function(e){G("Read","WORD",e)};this.readArrayOfUint=function(e){G("Read","UINT",e)};this.readArrayOfInt=function(e){G("Read","INT",e)};this.readArrayOfInt1Dp=function(e){G("Read","INT1DP",e)};this.readArrayOfDword=function(e){G("Read","DWORD",e)};this.readArrayOfUdint=function(e){G("Read","UDINT",e)};this.readArrayOfDint=function(e){G("Read","DINT",e)};this.readArrayOfReal=function(e){G("Read","REAL",e)};this.readArrayOfLreal=function(e){G("Read","LREAL",e)};this.readArrayOfString=function(e){G("Read","STRING",e)};this.readArrayOfTime=function(e){G("Read","TIME",e)};this.readArrayOfTod=function(e){G("Read","TOD",e)};this.readArrayOfDate=function(e){G("Read","DATE",e)};this.readArrayOfDt=function(e){G("Read","DT",e)};this.readArrayOfStruct=function(e){G("Read","STRUCT",e)};function Z(){var e={method:"Read",sync:true,indexGroup:n.UploadInfo,indexOffset:0,reqDescr:{readLength:8}};v(e).send()}function V(ar){var am=ar.xmlHttpReq.responseXML.documentElement,an,at,ap,ao;try{an=Q(am.getElementsByTagName("ppData")[0].firstChild.data);at=an.substr(0,4);a=U(at,"DWORD");at=an.substr(4,4);w=U(at,"DWORD")}catch(aq){m("TAME library error: Parsing of UploadInfo failed:"+aq);return}ao={method:"Read",sync:true,indexGroup:n.Upload,indexOffset:0,reqDescr:{readLength:w}};v(ao).send()}function ac(aE){var am=aE.xmlHttpReq.responseXML.documentElement,aw=0,aB=4,ay=8,au=12,aq=30,ap,ar,aD,av,ax,an,aC,at,ao,aA;try{ap=Q(am.getElementsByTagName("ppData")[0].firstChild.data);for(av=0;av<a;av++){ar=ap.substr(aw,4);ax=U(ar,"DWORD");an=ap.substring(aw+aq,(aw+ax)).split(String.fromCharCode(0));O[an[0]]={typeString:an[1],indexGroup:U(ap.substr(aw+aB,4),"DWORD"),indexOffset:U(ap.substr(aw+ay,4),"DWORD"),size:U(ap.substr(aw+au,4),"DWORD")};aC=an[1].split(" ");if(aC[0]==="ARRAY"){O[an[0]].type=aC[0];at=aC[1].substring(1,aC[1].length-1);at=at.split("..");at=parseInt(at[1],10)-parseInt(at[0],10)+1;O[an[0]].arrayLength=at;ao=aC[3].split("(");if(ao[1]!==undefined){ao[1]=ao[1].substr(0,ao[1].length-1);O[an[0]].fullType=aC[0]+"."+at+"."+ao[0]+"."+ao[1];O[an[0]].stringLength=parseInt(ao[1],10)}else{O[an[0]].fullType=aC[0]+"."+at+"."+ao[0]}O[an[0]].itemSize=O[an[0]].size/at;O[an[0]].arrayDataType="USER";for(aA in A){if(A.hasOwnProperty(aA)){if(ao[0]===aA){O[an[0]].arrayDataType=ao[0]}}}}else{ao=aC[0].split("(");if(ao[1]!==undefined){ao[1]=ao[1].substr(0,ao[1].length-1);O[an[0]].fullType=ao[0]+"."+ao[1];O[an[0]].stringLength=parseInt(ao[1],10)}else{O[an[0]].fullType=ao[0]}O[an[0]].type="USER";for(aA in A){if(A.hasOwnProperty(aA)){if(ao[0]===aA){O[an[0]].type=ao[0]}}}}aw+=ax}k=true;m("TAME library info: End of fetching the symbols.");m("TAME library info: Symbol table ready.")}catch(az){m("TAME library error: Parsing of uploaded symbol information failed:"+az);return}}m("TAME library info: Reading the PLC state ...");Y.readAdsState({sync:true});m("TAME library info: Current PLC state: "+Y.adsStateTxt);if(f.dontFetchSymbols===true){m("TAME library info: Reading of the UploadInfo deactivated. Symbol Table could not be created.")}else{m("TAME library info: Start fetching the symbols from PLC.");try{Z()}catch(ai){m("TAME library error: Could'nt fetch the symbol information from the PLC:"+ai);return}}};TAME.WebServiceClient.createClient=function(a){return new TAME.WebServiceClient(a)};